<!DOCTYPE html>
<html lang="en">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="canonical" href="release-notes-upgrading-changes30.html">
<title>Incompatible changes in 3.0 | Version 3.0 | Release Notes | Manual | ArangoDB Documentation</title>
<meta itemprop="description" name="description" content="It is recommended to check the following list of incompatible changes beforeupgrading to ArangoDB 3" />
<meta name="robots" content="index, follow" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta property="og:url" content="https://www.arangodb.com/docs/stable/release-notes-upgrading-changes30.html" />
<meta property="og:title" content="Incompatible changes in 3.0 | Version 3.0 | Release Notes | Manual | ArangoDB Documentation" />
<meta property="og:type" content="website" />
<meta property="og:description" content="It is recommended to check the following list of incompatible changes beforeupgrading to ArangoDB 3" />

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-81053435-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-81053435-1');
</script>

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5LQ7HC');
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('provide', 'adblockTracker', function(tracker, opts) {
    var ad = document.createElement('ins');
    ad.className = 'AdSense';
    ad.style.display = 'block';
    ad.style.position = 'absolute';
    ad.style.top = '-1px';
    ad.style.height = '1px';
    document.body.appendChild(ad);
    tracker.set('dimension' + opts.dimensionIndex, !ad.clientHeight);
    document.body.removeChild(ad);
  });

  ga('create', 'UA-81053435-6', 'auto');
  ga('require', 'adblockTracker', {dimensionIndex: 1});
  ga('send', 'pageview');
</script>

<script>
  !function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
  },s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
  a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
  twq('init','nz793');
  twq('track','PageView');
</script>

<script type="text/javascript">
  _linkedin_partner_id = "499017";
  window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
  window._linkedin_data_partner_ids.push(_linkedin_partner_id);
  </script><script type="text/javascript">
  (function(){var s = document.getElementsByTagName("script")[0];
  var b = document.createElement("script");
  b.type = "text/javascript";b.async = true;
  b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
  s.parentNode.insertBefore(b, s);})();
</script>

<link rel="shortcut icon" href="../../wp-content/uploads/2018/07/www.arangodb.com-favicon.png">
<link rel="stylesheet" href="../styles/gitbook/style.css">
<link rel="stylesheet" href="../styles/gitbook/highlight-website.css">
<link rel="stylesheet" href="../styles/gitbook/fontsettings-website.css">
<link rel="stylesheet" href="../styles/website.css">
<link rel="stylesheet" href="../styles/header.css">
<link rel="stylesheet" href="../styles/navbar.css">
<link rel="stylesheet" href="../styles/site.css">
<link rel="stylesheet" href="../styles/pygments-vs.css">
<script src="../js/jquery-3.4.0.min.js"></script>
<script src="../js/site.js"></script>
</head>
<body>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5LQ7HC" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<noscript><img height="1" width="1" style="display:none;" alt="" src="https://dc.ads.linkedin.com/collect/?pid=499017&fmt=gif" /></noscript>

<div class="arangodb-header">
  <div class="arangodb-logo">
    <a href="https://arangodb.com/">
      <img src="../assets/arangodb_logo_2016.png" alt="ArangoDB Logo">
    </a>
  </div>
  <div class="arangodb-logo-small">
    <a href="https://arangodb.com/">
      <img src="../assets/arangodb_logo_small_2016.png" alt="ArangoDB Logo">
    </a>
  </div>
  <select class="arangodb-version-switcher">
      <option value="devel">3.8</option>
      <option value="stable">3.7</option>
      <option value="3.6">3.6</option>
      <option value="3.5">3.5</option>
      <option value="3.4">3.4</option>
      <option value="3.3">3.3</option>
  </select>
  <script type="text/javascript">
    var versionAliases = {"stable":"3.7","devel":"3.8"};
    var current = location.href;

    var selectedVersion = current.split('/')[4];
    var switcher = document.querySelector(".arangodb-version-switcher");

    for (var i = 0; i < switcher.options.length; i++) {
      var value = switcher.options.item(i).value;
      if (value == selectedVersion) {
        switcher.value = value;
      } else if (versionAliases[value] == selectedVersion) {
        switcher.value = value;
      }
    }
    
    switcher.addEventListener('change', function(event) {
      var current = location.href;
      var urlElements = current.split('/');
      urlElements[4] = event.target.value;
      var newUrl = urlElements.join("/");
      location.href = newUrl;
    });
  </script>
  <ul class="arangodb-navmenu">
    <li class="active-tab">
      <a href="index.html" data-book="Manual">Manual</a>
    </li>
    <li>
      <a href="aql/index.html" data-book="AQL">AQL</a>
    </li>
    <li>
      <a href="http/index.html" data-book="HTTP">HTTP</a>
    </li>
    <li>
      <a href="drivers/index.html" data-book="Drivers">Drivers</a>
    </li>
    <li>
      <a href="oasis/index.html" data-book="Oasis">Oasis</a>
    </li>
    <li class="socialIcons" title="GitHub">
      <a href="https://github.com/ArangoDB/ArangoDB/issues" target="_blank">
        <i class="fa fa-github"></i>
      </a>
    </li>
    <li class="socialIcons" title="StackOverflow">
      <a href="https://stackoverflow.com/questions/tagged/arangodb" target="_blank">
        <i class="fa fa-stack-overflow"></i>
      </a>
    </li>
    <li class="socialIcons socialIcons-googlegroups" title="Google Groups">
      <a href="https://groups.google.com/forum/#!forum/arangodb" target="_blank">
        <img alt="Google Groups" src="../assets/googlegroupsIcon.png">
      </a>
    </li>
    <li class="socialIcons" title="Slack">
      <a href="https://slack.arangodb.com" target="_blank">
        <i class="fa fa-slack"></i>
      </a>
    </li>
    <li>
      <div class="searchbar">
        <div id="search-searchbar"></div>
      </div>
    </li>
    <li class="placeholder">
      <div style="width: 15px"></div>
    </li>
  </ul>
  <div id="search-hits"></div>
</div>
 
  <div class="book with-summary font-size-2 font-family-1">
    <div class="book-summary">
      <nav role="navigation">
    <ul class="summary">
  <li class="chapter">
  <a href="index.html">Introduction</a>
  </li>
  <li class="chapter">
  <a href="highlights.html">Highlights</a>
  </li>
  <li class="header">GETTING FAMILIAR</li>
  <li class="chapter">
  <a href="getting-started.html">Getting Started</a>
    <ul class="articles">
      <li class="chapter">
      <a href="getting-started-installation.html">Installation</a>
      </li>
      <li class="chapter">
      <a href="getting-started-authentication.html">Authentication</a>
      </li>
      <li class="chapter">
      <a href="getting-started-web-interface.html">Web Interface</a>
      </li>
      <li class="chapter">
      <a href="getting-started-databases-collections-documents.html">Databases, Collections and Documents</a>
      </li>
      <li class="chapter">
      <a href="getting-started-querying-the-database.html">Querying the Database</a>
      </li>
      <li class="chapter">
      <a href="getting-started-coming-from-sql.html">Coming from SQL</a>
      </li>
      <li class="chapter">
      <a href="getting-started-next-steps.html">Next Steps</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="tutorials.html">Tutorials</a>
    <ul class="articles">
      <li class="chapter">
      <a href="tutorials-reduce-memory-footprint.html">Reduce Memory Footprint</a>
      </li>
      <li class="chapter">
      <a href="tutorials-starter.html">ArangoDB Starter</a>
      </li>
      <li class="chapter">
      <a href="tutorials-dc2-dc.html">Datacenter to datacenter Replication</a>
      </li>
      <li class="chapter">
      <a href="tutorials-kubernetes.html">Kubernetes</a>
        <ul class="articles">
          <li class="chapter">
          <a href="tutorials-kubernetes-eks.html">Amazon EKS</a>
          </li>
          <li class="chapter">
          <a href="tutorials-kubernetes-gke.html">Google GKE</a>
          </li>
          <li class="chapter">
          <a href="tutorials-kubernetes-aks.html">Azure AKS</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="tutorials-kubernetes-dc2-dc.html">DC2DC on Kubernetes</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="programs.html">Programs & Tools</a>
    <ul class="articles">
      <li class="chapter">
      <a href="programs-arangod.html">ArangoDB Server</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangod-options.html">Options</a>
            <ul class="articles">
              <li class="chapter">
              <a href="programs-arangod-global.html">Global</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-agency.html">Agency</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-arangosearch.html">ArangoSearch</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-audit.html">Audit</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-cache.html">Cache</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-backup.html">Backup</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-cluster.html">Cluster</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-compaction.html">Compaction</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-database.html">Database</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-foxx.html">Foxx</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-frontend.html">Frontend</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-http.html">HTTP</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-javascript.html">JavaScript</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-ldap.html">LDAP</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-log.html">Log</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-network.html">Network</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-nonce.html">Nonce</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-query.html">Query</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-random.html">Random</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-replication.html">Replication</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-rclone.html">Rclone</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-rocksdb.html">RocksDB</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-server.html">Server</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-ssl.html">SSL</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-tcp.html">TCP</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-temp.html">Temp</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-transaction.html">Transaction</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-ttl.html">TTL</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-vst.html">VST</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-wal.html">WAL</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="programs-arangod-env-vars.html">Environment variables</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-web-interface.html">Web Interface</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-web-interface-dashboard.html">Dashboard</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-cluster.html">Cluster</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-collections.html">Collections</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-document.html">Document</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-aql-editor.html">Queries</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-graphs.html">Graphs</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-services.html">Services</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-users.html">Users</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-logs.html">Logs</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangosh.html">ArangoDB Shell</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangosh-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangosh-details.html">Details</a>
          </li>
          <li class="chapter">
          <a href="programs-arangosh-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-starter.html">ArangoDB Starter</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-starter-options.html">Options</a>
          </li>
          <li class="chapter">
          <a href="programs-starter-security.html">Security</a>
          </li>
          <li class="chapter">
          <a href="programs-starter-architecture.html">Architecture</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangodump.html">Arangodump</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangodump-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangodump-options.html">Options</a>
          </li>
          <li class="chapter">
          <a href="programs-arangodump-maskings.html">Maskings</a>
          </li>
          <li class="chapter">
          <a href="programs-arangodump-limitations.html">Limitations</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangorestore.html">Arangorestore</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangorestore-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangorestore-fast-cluster-restore.html">Fast Cluster Restore</a>
          </li>
          <li class="chapter">
          <a href="programs-arangorestore-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangobackup.html">Arangobackup</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangobackup-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangobackup-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangoimport.html">Arangoimport</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangoimport-examples-json.html">Examples JSON</a>
          </li>
          <li class="chapter">
          <a href="programs-arangoimport-examples-csv.html">Examples CSV</a>
          </li>
          <li class="chapter">
          <a href="programs-arangoimport-details.html">Details</a>
          </li>
          <li class="chapter">
          <a href="programs-arangoimport-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangoexport.html">Arangoexport</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangoexport-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangoexport-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangobench.html">Arangobench</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangobench-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangobench-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangoinspect.html">Arangoinspect</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangoinspect-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangoinspect-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-foxx-cli.html">Foxx CLI</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-foxx-cli-details.html">Details</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="header">CORE TOPICS</li>
  <li class="chapter">
  <a href="data-modeling.html">Data models & modeling</a>
    <ul class="articles">
      <li class="chapter">
      <a href="data-modeling-concepts.html">Concepts</a>
      </li>
      <li class="chapter">
      <a href="data-modeling-databases.html">Databases</a>
        <ul class="articles">
          <li class="chapter">
          <a href="data-modeling-databases-working-with.html">Working with Databases</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-databases-notes.html">Notes about Databases</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="data-modeling-collections.html">Collections</a>
        <ul class="articles">
          <li class="chapter">
          <a href="data-modeling-collections-collection-methods.html">Collection Methods</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-collections-database-methods.html">Database Methods</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="data-modeling-documents.html">Documents</a>
        <ul class="articles">
          <li class="chapter">
          <a href="data-modeling-documents-document-address.html">Basics and Terminology</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-documents-document-methods.html">Collection Methods</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-documents-database-methods.html">Database Methods</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-documents-schema-validation.html">Schema Validation</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-monetary-data-without-precision-loss.html">Monetary data without precision loss</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="data-modeling-graphs-vertices-edges.html">Graphs, Vertices & Edges</a>
      </li>
      <li class="chapter">
      <a href="data-modeling-views.html">Views</a>
        <ul class="articles">
          <li class="chapter">
          <a href="data-modeling-views-database-methods.html">Database Methods</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-views-view-methods.html">View Methods</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="data-modeling-naming-conventions.html">Naming Conventions</a>
        <ul class="articles">
          <li class="chapter">
          <a href="data-modeling-naming-conventions-database-names.html">Database Names</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-naming-conventions-collection-and-view-names.html">Collection and View Names</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-naming-conventions-document-keys.html">Document Keys</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-naming-conventions-attribute-names.html">Attribute Names</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="data-modeling-operational-factors.html">Operational Factors</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="indexing.html">Indexing</a>
    <ul class="articles">
      <li class="chapter">
      <a href="indexing-index-basics.html">Index Basics</a>
      </li>
      <li class="chapter">
      <a href="indexing-which-index.html">Which index to use when</a>
      </li>
      <li class="chapter">
      <a href="indexing-index-utilization.html">Index Utilization</a>
      </li>
      <li class="chapter">
      <a href="indexing-working-with-indexes.html">Working with Indexes</a>
        <ul class="articles">
          <li class="chapter">
          <a href="indexing-persistent.html">Persistent</a>
          </li>
          <li class="chapter">
          <a href="indexing-ttl.html">TTL Indexes</a>
          </li>
          <li class="chapter">
          <a href="indexing-fulltext.html">Fulltext Indexes</a>
          </li>
          <li class="chapter">
          <a href="indexing-geo.html">Geo-spatial Indexes</a>
          </li>
          <li class="chapter">
          <a href="indexing-vertex-centric.html">Vertex Centric Indexes</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="transactions.html">Transactions</a>
    <ul class="articles">
      <li class="chapter">
      <a href="transactions-transaction-invocation.html">Transaction invocation</a>
      </li>
      <li class="chapter">
      <a href="transactions-passing.html">Passing parameters</a>
      </li>
      <li class="chapter">
      <a href="transactions-locking-and-isolation.html">Locking and isolation</a>
      </li>
      <li class="chapter">
      <a href="transactions-durability.html">Durability</a>
      </li>
      <li class="chapter">
      <a href="transactions-limitations.html">Limitations</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="graphs.html">Graphs</a>
    <ul class="articles">
      <li class="chapter">
      <a href="graphs-general-graphs.html">General Graphs</a>
        <ul class="articles">
          <li class="chapter">
          <a href="graphs-general-graphs-management.html">Graph Management</a>
          </li>
          <li class="chapter">
          <a href="graphs-general-graphs-functions.html">Graph Functions</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="graphs-satellite-graphs.html">SatelliteGraphs</a>
        <ul class="articles">
          <li class="chapter">
          <a href="graphs-satellite-graphs-management.html">Management</a>
          </li>
          <li class="chapter">
          <a href="graphs-satellite-graphs-details.html">Details</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="graphs-smart-graphs.html">SmartGraphs</a>
        <ul class="articles">
          <li class="chapter">
          <a href="graphs-smart-graphs-management.html">SmartGraph Management</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="graphs-traversals.html">Traversals</a>
        <ul class="articles">
          <li class="chapter">
          <a href="graphs-traversals-using-traversal-objects.html">Using Traversal Objects</a>
          </li>
          <li class="chapter">
          <a href="graphs-traversals-example-data.html">Example Data</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="graphs-edges.html">Working with Edges</a>
      </li>
      <li class="chapter">
      <a href="graphs-pregel.html">Pregel</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="arangosearch.html">ArangoSearch</a>
    <ul class="articles">
      <li class="chapter">
      <a href="arangosearch-views.html">Views</a>
      </li>
      <li class="chapter">
      <a href="arangosearch-analyzers.html">Analyzers</a>
      </li>
      <li class="chapter">
      <a href="arangosearch-examples.html">Examples</a>
      </li>
    </ul>
  </li>
  <li class="header">ADVANCED TOPICS</li>
  <li class="chapter">
  <a href="architecture.html">Architecture</a>
    <ul class="articles">
      <li class="chapter">
      <a href="architecture-deployment-modes.html">ArangoDB Deployment Modes</a>
        <ul class="articles">
          <li class="chapter">
          <a href="architecture-deployment-modes-single-instance.html">Single Instance</a>
          </li>
          <li class="chapter">
          <a href="architecture-deployment-modes-master-slave.html">Master/Slave</a>
            <ul class="articles">
              <li class="chapter">
              <a href="architecture-deployment-modes-master-slave-architecture.html">Architecture</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-master-slave-limitations.html">Limitations</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="architecture-deployment-modes-active-failover.html">Active Failover</a>
            <ul class="articles">
              <li class="chapter">
              <a href="architecture-deployment-modes-active-failover-architecture.html">Architecture</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-active-failover-limitations.html">Limitations</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="architecture-deployment-modes-cluster.html">Cluster</a>
            <ul class="articles">
              <li class="chapter">
              <a href="architecture-deployment-modes-cluster-architecture.html">Architecture</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-cluster-data-models.html">Data Models</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-cluster-sharding.html">Data Sharding</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-cluster-limitations.html">Limitations</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="architecture-deployment-modes-dc2-dc.html">Datacenter to datacenter replication</a>
            <ul class="articles">
              <li class="chapter">
              <a href="architecture-deployment-modes-dc2-dc-introduction.html">Introduction</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-dc2-dc-applicability.html">Applicability</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-dc2-dc-requirements.html">Requirements</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-dc2-dc-limitations.html">Limitations</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="architecture-single-instance-vs-cluster.html">Single Instance vs. Cluster</a>
      </li>
      <li class="chapter">
      <a href="architecture-storage-engines.html">Storage Engines</a>
      </li>
      <li class="chapter">
      <a href="architecture-replication.html">Replication</a>
      </li>
      <li class="chapter">
      <a href="architecture-write-ahead-log.html">Write-ahead log</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="foxx.html">Foxx Microservices</a>
    <ul class="articles">
      <li class="chapter">
      <a href="foxx-getting-started.html">Getting started</a>
      </li>
      <li class="chapter">
      <a href="foxx-guides.html">Guides</a>
        <ul class="articles">
          <li class="chapter">
          <a href="foxx-guides-routing.html">Working with routers</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-collections.html">Working with collections</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-queries.html">Writing queries</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-development-mode.html">Development mode</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-testing.html">Testing Foxx services</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-cluster.html">Foxx in a cluster</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-scripts.html">Scripts and scheduling</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-bundled-node-modules.html">Using Node modules</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-webpack.html">Using Webpack with Foxx</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-auth.html">Authentication and sessions</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-dependencies.html">Linking services together</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-files.html">Working with files</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-making-requests.html">Making requests</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-browser.html">Access from the browser</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-legacy-mode.html">Working with 2.x services</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="foxx-reference.html">Reference</a>
        <ul class="articles">
          <li class="chapter">
          <a href="foxx-reference-manifest.html">Service manifest</a>
          </li>
          <li class="chapter">
          <a href="foxx-reference-context.html">Service context</a>
          </li>
          <li class="chapter">
          <a href="foxx-reference-configuration.html">Configuration</a>
          </li>
          <li class="chapter">
          <a href="foxx-reference-routers.html">Routers</a>
            <ul class="articles">
              <li class="chapter">
              <a href="foxx-reference-routers-endpoints.html">Endpoints</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-routers-middleware.html">Middleware</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-routers-request.html">Request</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-routers-response.html">Response</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="foxx-reference-sessions.html">Sessions middleware</a>
            <ul class="articles">
              <li class="chapter">
              <a href="foxx-reference-sessions-storages.html">Session storages</a>
                <ul class="articles">
                  <li class="chapter">
                  <a href="foxx-reference-sessions-storages-collection.html">Collection storage</a>
                  </li>
                  <li class="chapter">
                  <a href="foxx-reference-sessions-storages-jwt.html">JWT storage</a>
                  </li>
                </ul>
              </li>
              <li class="chapter">
              <a href="foxx-reference-sessions-transports.html">Session transports</a>
                <ul class="articles">
                  <li class="chapter">
                  <a href="foxx-reference-sessions-transports-cookie.html">Cookie transport</a>
                  </li>
                  <li class="chapter">
                  <a href="foxx-reference-sessions-transports-header.html">Header transport</a>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="foxx-reference-modules.html">Related modules</a>
            <ul class="articles">
              <li class="chapter">
              <a href="foxx-reference-modules-auth.html">Authentication</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-modules-oauth1.html">OAuth 1.0a</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-modules-oauth2.html">OAuth 2.0</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-modules-graph-ql.html">GraphQL</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-modules-queues.html">Queues</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="foxx-deployment.html">Deployment</a>
      </li>
      <li class="chapter">
      <a href="foxx-migrating2x.html">Migrating 2.x services</a>
        <ul class="articles">
          <li class="chapter">
          <a href="foxx-migrating2x-wayback.html">Migrating from pre-2.8</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-manifest.html">manifest.json</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-context.html">applicationContext</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-repositories.html">Repositories and Models</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-controllers.html">Controllers</a>
            <ul class="articles">
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-endpoints.html">Request context</a>
              </li>
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-errors.html">Error handling</a>
              </li>
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-middleware.html">Before/After/Around</a>
              </li>
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-request.html">Request object</a>
              </li>
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-response.html">Response object</a>
              </li>
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-io-c.html">Dependency Injection</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-sessions.html">Sessions</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-auth.html">Auth and OAuth2</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-queries.html">Foxx Queries</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="satellites.html">SatelliteCollections</a>
  </li>
  <li class="chapter">
  <a href="smartjoins.html">SmartJoins</a>
  </li>
  <li class="header">OPERATIONS</li>
  <li class="chapter">
  <a href="installation.html">Installation</a>
    <ul class="articles">
      <li class="chapter">
      <a href="installation-linux.html">Linux</a>
        <ul class="articles">
          <li class="chapter">
          <a href="installation-linux-osconfiguration.html">Operating System Configuration</a>
          </li>
          <li class="chapter">
          <a href="installation-linux-ostuning-scripts.html">Linux OS Tuning Script Examples</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="installation-mac-osx.html">macOS</a>
      </li>
      <li class="chapter">
      <a href="installation-windows.html">Windows</a>
      </li>
      <li class="chapter">
      <a href="installation-compiling.html">Compiling</a>
        <ul class="articles">
          <li class="chapter">
          <a href="installation-compiling-debian.html">Compile on Debian</a>
          </li>
          <li class="chapter">
          <a href="installation-compiling-windows.html">Compile on Windows</a>
          </li>
          <li class="chapter">
          <a href="installation-compiling-running-custom-build.html">Running Custom Build</a>
          </li>
          <li class="chapter">
          <a href="installation-compiling-jemalloc.html">Recompiling jemalloc</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="uninstallation.html">Uninstallation</a>
  </li>
  <li class="chapter">
  <a href="deployment.html">Deployment</a>
    <ul class="articles">
      <li class="chapter">
      <a href="deployment-modes.html">By ArangoDB Deployment Modes</a>
        <ul class="articles">
          <li class="chapter">
          <a href="deployment-single-instance.html">Single Instance</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-single-instance-using-the-starter.html">Using the ArangoDB Starter</a>
              </li>
              <li class="chapter">
              <a href="deployment-single-instance-manual-start.html">Manual Start</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="deployment-master-slave.html">Master/Slave</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-master-slave-manual-start.html">Manual Start</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="deployment-active-failover.html">Active Failover</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-active-failover-using-the-starter.html">Using the ArangoDB Starter</a>
              </li>
              <li class="chapter">
              <a href="deployment-active-failover-manual-start.html">Manual Start</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="deployment-cluster.html">Cluster</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-cluster-preliminary-information.html">Preliminary Information</a>
              </li>
              <li class="chapter">
              <a href="deployment-cluster-using-the-starter.html">Using the ArangoDB Starter</a>
              </li>
              <li class="chapter">
              <a href="deployment-cluster-manual-start.html">Manual Start</a>
              </li>
              <li class="chapter">
              <a href="deployment-cluster-kubernetes.html">Kubernetes</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="deployment-dc2-dc.html">Multiple Datacenters</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-dc2-dc-cluster.html">Cluster</a>
              </li>
              <li class="chapter">
              <a href="deployment-dc2-dc-arango-sync-master.html">ArangoSync Master</a>
              </li>
              <li class="chapter">
              <a href="deployment-dc2-dc-arango-sync-workers.html">ArangoSync Workers</a>
              </li>
              <li class="chapter">
              <a href="deployment-dc2-dc-prometheus-grafana.html">Prometheus & Grafana</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="deployment-standalone-agency.html">Standalone Agency</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="deployment-technology.html">By Technology</a>
        <ul class="articles">
          <li class="chapter">
          <a href="deployment-manually.html">Manually</a>
          </li>
          <li class="chapter">
          <a href="deployment-arango-dbstarter.html">ArangoDB Starter</a>
          </li>
          <li class="chapter">
          <a href="deployment-docker.html">Docker</a>
          </li>
          <li class="chapter">
          <a href="deployment-kubernetes.html">Kubernetes</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-kubernetes-usage.html">Using the Operator</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-dashboards.html">Dashboards</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-deployment-resource.html">Deployment Resource Reference</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-backup-resource.html">Backup Resource</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-backup-policy-resource.html">BackupPolicy Resource</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-driver-configuration.html">Driver Configuration</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-helm.html">Helm</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-authentication.html">Authentication</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-scaling.html">Scaling</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-drain.html">Draining Nodes</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-upgrading.html">Upgrading</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-config-and-secrets.html">ArangoDB Configuration & Secrets</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-metrics.html">Metrics</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-services-and-load-balancer.html">Services & Load balancer</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-deployment-replication-resource.html">Deployment Replication Resource Reference</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-storage.html">Storage</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-storage-resource.html">Storage Resource</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-tls.html">TLS</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-troubleshooting.html">Troubleshooting</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="deployment-cloud.html">In the Cloud</a>
        <ul class="articles">
          <li class="chapter">
          <a href="deployment-cloud-aws.html">AWS</a>
          </li>
          <li class="chapter">
          <a href="deployment-cloud-azure.html">Azure</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="deployment-production-checklist.html">Production Checklist</a>
      </li>
      <li class="chapter">
      <a href="deployment-migrating-single-instance-cluster.html">Migrating Single Instance to Cluster</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="backup-restore.html">Backup & Restore</a>
  </li>
  <li class="chapter">
  <a href="upgrading.html">Upgrading</a>
    <ul class="articles">
      <li class="chapter">
      <a href="upgrading-general-info.html">General Upgrade Information</a>
      </li>
      <li class="chapter">
      <a href="upgrading-community-to-enterprise.html">Community to Enterprise Upgrade</a>
      </li>
      <li class="chapter">
      <a href="upgrading-osspecific-info.html">OS-specific Information</a>
        <ul class="articles">
          <li class="chapter">
          <a href="upgrading-osspecific-info-linux.html">Upgrading on Linux</a>
          </li>
          <li class="chapter">
          <a href="upgrading-osspecific-info-mac-os.html">Upgrading on macOS</a>
          </li>
          <li class="chapter">
          <a href="upgrading-osspecific-info-windows.html">Upgrading on Windows</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="upgrading-starter.html">Upgrading Starter Deployments</a>
      </li>
      <li class="chapter">
      <a href="upgrading-manually.html">Upgrading Manual Deployments</a>
        <ul class="articles">
          <li class="chapter">
          <a href="upgrading-manually-active-failover.html">Upgrading an Active Failover deployment</a>
          </li>
          <li class="chapter">
          <a href="upgrading-manually-cluster.html">Upgrading a Cluster</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="upgrading-kubernetes.html">Upgrading Kubernetes Deployments</a>
      </li>
      <li class="chapter">
      <a href="upgrading-version-specific.html">Version Specific Upgrade Information</a>
        <ul class="articles">
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading34.html">Upgrading to 3.4</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading33.html">Upgrading to 3.3</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading32.html">Upgrading to 3.2</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading31.html">Upgrading to 3.1</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading30.html">Upgrading to 3.0</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading28.html">Upgrading to 2.8</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading26.html">Upgrading to 2.6</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading25.html">Upgrading to 2.5</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading24.html">Upgrading to 2.4</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading23.html">Upgrading to 2.3</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading22.html">Upgrading to 2.2</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="downgrading.html">Downgrading</a>
  </li>
  <li class="chapter">
  <a href="scaling.html">Scaling</a>
  </li>
  <li class="chapter">
  <a href="administration.html">Administration</a>
    <ul class="articles">
      <li class="chapter">
      <a href="administration-configuration.html">Configuration</a>
      </li>
      <li class="chapter">
      <a href="administration-import-export.html">Import & Export</a>
      </li>
      <li class="chapter">
      <a href="administration-managing-users.html">User Management</a>
        <ul class="articles">
          <li class="chapter">
          <a href="administration-managing-users-in-arangosh.html">In Arangosh</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="administration-engine-switch-engine.html">Switch Storage Engine</a>
      </li>
      <li class="chapter">
      <a href="administration-master-slave.html">Master/Slave</a>
        <ul class="articles">
          <li class="chapter">
          <a href="administration-master-slave-setting-up.html">Setting up</a>
            <ul class="articles">
              <li class="chapter">
              <a href="administration-master-slave-replication-applier.html">Replication Applier</a>
              </li>
              <li class="chapter">
              <a href="administration-master-slave-database-setup.html">Per-Database Setup</a>
              </li>
              <li class="chapter">
              <a href="administration-master-slave-server-level-setup.html">Server-Level Setup</a>
              </li>
              <li class="chapter">
              <a href="administration-master-slave-initialize-from-backup.html">Speeding Up Slave Initialization</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="administration-master-slave-syncing-collections.html">Syncing Collections</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="administration-active-failover.html">Active Failover</a>
      </li>
      <li class="chapter">
      <a href="administration-cluster.html">Cluster</a>
      </li>
      <li class="chapter">
      <a href="administration-dc2-dc.html">Datacenter to datacenter replication</a>
      </li>
      <li class="chapter">
      <a href="administration-starter.html">ArangoDB Starter Administration</a>
        <ul class="articles">
          <li class="chapter">
          <a href="administration-starter-removal.html">Removal Procedure</a>
          </li>
          <li class="chapter">
          <a href="administration-starter-recovery.html">Recovery Procedure</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="security.html">Security</a>
    <ul class="articles">
      <li class="chapter">
      <a href="security-security-options.html">Security Options</a>
      </li>
      <li class="chapter">
      <a href="security-change-root-password.html">Change Root Password</a>
      </li>
      <li class="chapter">
      <a href="security-encryption.html">Encryption at Rest</a>
      </li>
      <li class="chapter">
      <a href="security-auditing.html">Auditing</a>
        <ul class="articles">
          <li class="chapter">
          <a href="security-auditing-audit-configuration.html">Configuration</a>
          </li>
          <li class="chapter">
          <a href="security-auditing-audit-events.html">Events</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="security-starter.html">Securing Starter Deployments</a>
      </li>
      <li class="chapter">
      <a href="security-dc2-dc.html">Datacenter to datacenter replication</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="monitoring.html">Monitoring</a>
    <ul class="articles">
      <li class="chapter">
      <a href="monitoring-log-levels.html">Log Levels</a>
      </li>
      <li class="chapter">
      <a href="monitoring-dc2-dc.html">Datacenter to datacenter replication</a>
      </li>
      <li class="chapter">
      <a href="monitoring-collectd.html">Collectd</a>
        <ul class="articles">
          <li class="chapter">
          <a href="monitoring-collectd-slave-status.html">Replication Slaves</a>
          </li>
          <li class="chapter">
          <a href="monitoring-collectd-traffic-with-ipaccounting.html">Network usage</a>
          </li>
          <li class="chapter">
          <a href="monitoring-collectd-other-relevant-metrics.html">More metrics</a>
          </li>
          <li class="chapter">
          <a href="monitoring-collectd-foxx-apps.html">Monitoring Foxx</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="troubleshooting.html">Troubleshooting</a>
    <ul class="articles">
      <li class="chapter">
      <a href="troubleshooting-arangod.html">arangod</a>
      </li>
      <li class="chapter">
      <a href="troubleshooting-emergency-console.html">Emergency Console</a>
      </li>
      <li class="chapter">
      <a href="troubleshooting-cluster.html">Cluster</a>
        <ul class="articles">
          <li class="chapter">
          <a href="troubleshooting-cluster-agency-dump.html">Agency Dump</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="troubleshooting-dc2-dc.html">Datacenter to datacenter replication</a>
      </li>
    </ul>
  </li>
  <li><hr/></li>
  <li class="chapter selected">
  <a href="release-notes.html">Release Notes</a>
    <ul class="articles">
      <li class="chapter">
      <a href="release-notes-37.html">Version 3.7</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features37.html">What's New in 3.7</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues37.html">Known Issues in 3.7</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes37.html">Incompatible changes in 3.7</a>
          </li>
          <li class="chapter">
          <a href="release-notes-api-changes37.html">API changes in 3.7</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-36.html">Version 3.6</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features36.html">What's New in 3.6</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues36.html">Known Issues in 3.6</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes36.html">Incompatible changes in 3.6</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-35.html">Version 3.5</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features35.html">What's New in 3.5</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues35.html">Known Issues in 3.5</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes35.html">Incompatible changes in 3.5</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-34.html">Version 3.4</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features34.html">What's New in 3.4</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues34.html">Known Issues in 3.4</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes34.html">Incompatible changes in 3.4</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-33.html">Version 3.3</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features33.html">What's New in 3.3</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues33.html">Known Issues in 3.3</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes33.html">Incompatible changes in 3.3</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-32.html">Version 3.2</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features32.html">What's New in 3.2</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues32.html">Known Issues in 3.2</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes32.html">Incompatible changes in 3.2</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-31.html">Version 3.1</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features31.html">What's New in 3.1</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes31.html">Incompatible changes in 3.1</a>
          </li>
        </ul>
      </li>
      <li class="chapter selected">
      <a href="release-notes-30.html">Version 3.0</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features30.html">What's New in 3.0</a>
          </li>
          <li class="chapter selected active">
          <a href="release-notes-upgrading-changes30.html">Incompatible changes in 3.0</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-28.html">Version 2.8</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features28.html">What's New in 2.8</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes28.html">Incompatible changes in 2.8</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-27.html">Version 2.7</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features27.html">What's New in 2.7</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes27.html">Incompatible changes in 2.7</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-26.html">Version 2.6</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features26.html">What's New in 2.6</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes26.html">Incompatible changes in 2.6</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-25.html">Version 2.5</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features25.html">What's New in 2.5</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes25.html">Incompatible changes in 2.5</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-24.html">Version 2.4</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features24.html">What's New in 2.4</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes24.html">Incompatible changes in 2.4</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-23.html">Version 2.3</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features23.html">What's New in 2.3</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes23.html">Incompatible changes in 2.3</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-22.html">Version 2.2</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features22.html">What's New in 2.2</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-21.html">Version 2.1</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features21.html">What's New in 2.1</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="appendix.html">Appendix</a>
    <ul class="articles">
      <li class="chapter">
      <a href="appendix-references.html">References</a>
        <ul class="articles">
          <li class="chapter">
          <a href="appendix-references-dbobject.html">db</a>
          </li>
          <li class="chapter">
          <a href="appendix-references-collection-object.html">collection</a>
          </li>
          <li class="chapter">
          <a href="appendix-references-cursor-object.html">cursor</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="appendix-java-script-modules.html">JavaScript Modules</a>
        <ul class="articles">
          <li class="chapter">
          <a href="appendix-java-script-modules-arango-db.html">@arangodb</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-analyzers.html">analyzers</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-console.html">console</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-crypto.html">crypto</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-file-system.html">fs</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-request.html">request</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-actions.html">actions</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-queries.html">queries</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-wal.html">Write-ahead log</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-tasks.html">Task Management</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="appendix-deprecated.html">Deprecated</a>
        <ul class="articles">
          <li class="chapter">
          <a href="appendix-deprecated-simple-queries.html">Simple Queries</a>
            <ul class="articles">
              <li class="chapter">
              <a href="appendix-deprecated-simple-queries-pagination.html">Pagination</a>
              </li>
              <li class="chapter">
              <a href="appendix-deprecated-simple-queries-modification-queries.html">Modification Queries</a>
              </li>
              <li class="chapter">
              <a href="appendix-deprecated-simple-queries-geo-queries.html">Geo Queries</a>
              </li>
              <li class="chapter">
              <a href="appendix-deprecated-simple-queries-fulltext-queries.html">Fulltext Queries</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="appendix-error-codes.html">Error codes and meanings</a>
      </li>
      <li class="chapter">
      <a href="appendix-glossary.html">Glossary</a>
      </li>
    </ul>
  </li>
</ul>

</nav>
    </div>
    <div class="book-body">
      <script type="text/javascript">
          var availableVersions = ["devel","stable","3.6","3.5","3.4","3.3",];
          versionSwitcherSetAvailable(availableVersions);
      </script>
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <a class="btn pull-left js-toolbar-action hamburger" aria-label=""><i class="fa fa-align-justify"></i></a>
          <a class="btn pull-left js-toolbar-action" aria-label="" href="https://github.com/arangodb/docs/edit/master/3.7/release-notes-upgrading-changes30.md" target="_blank"><i class="fa fa-github"></i> Contribute</a>
        </div>
        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">
            <section class="normal markdown-section">
              <h1 id="incompatible-changes-in-arangodb-30">Incompatible changes in ArangoDB 3.0</h1>

<p>It is recommended to check the following list of incompatible changes <strong>before</strong>
upgrading to ArangoDB 3.0, and adjust any client programs if necessary.</p>

<h2 id="build-system">Build system</h2>

<p>Building ArangoDB 3.0 from source now requires CMake.</p>

<p>The pre-3.0 build system used a configure-based approach. The steps to build
ArangoDB 2.8 from source code were:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make setup
./configure &lt;options&gt;
make
</code></pre></div></div>

<p>These steps will not work anymore, as ArangoDB 3.0 does not come with a
configure script.</p>

<p>To build 3.0 on Linux, create a separate build directory first:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir -p build
</code></pre></div></div>

<p>and then create the initial build scripts once using CMake:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(cd build &amp;&amp; cmake &lt;options&gt; ..)
</code></pre></div></div>

<p>The above command will configure the build and check for the required
dependencies. If everything works well the actual build can be started with</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(cd build &amp;&amp; make)
</code></pre></div></div>

<p>The binaries for the ArangoDB server and all client tools will then be created
inside the <code class="language-plaintext highlighter-rouge">build</code> directory. To start ArangoDB locally from the <code class="language-plaintext highlighter-rouge">build</code> directory,
use</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>build/bin/arangod &lt;options&gt;
</code></pre></div></div>

<h2 id="datafiles-and-datafile-names">Datafiles and datafile names</h2>

<p>ArangoDB 3.0 uses a new VelocyPack-based format for storing data in WAL logfiles
and collection datafiles. The file format is not compatible with the files used
in prior versions of ArangoDB. That means datafiles written by ArangoDB 3.0 cannot be
used in earlier versions and vice versa.</p>

<p>The pattern for collection directory names was changed in 3.0 to include a random 
id component at the end. The new pattern is <code class="language-plaintext highlighter-rouge">collection-&lt;id&gt;-&lt;random&gt;</code>, where <code class="language-plaintext highlighter-rouge">&lt;id&gt;</code> 
is the collection id and <code class="language-plaintext highlighter-rouge">&lt;random&gt;</code> is a random number. Previous versions of ArangoDB 
used a pattern <code class="language-plaintext highlighter-rouge">collection-&lt;id&gt;</code> without the random number.</p>

<h2 id="user-management">User Management</h2>

<p>Unlike ArangoDB 2.x, ArangoDB 3.0 users are now separated from databases, and you can 
grant one or more database permissions to a user.</p>

<p>If you want to mimic the behavior of ArangoDB, you should name your users like 
<code class="language-plaintext highlighter-rouge">username@dbname</code>.</p>

<p>Users that can access the <em>_system</em> database are allowed to manage users and
permissions for all databases.</p>

<h2 id="edges-and-edges-attributes">Edges and edges attributes</h2>

<p>In ArangoDB prior to 3.0 the attributes <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> of edges were treated
specially when loading or storing edges. That special handling led to these attributes
being not as flexible as regular document attributes. For example, the <code class="language-plaintext highlighter-rouge">_from</code> and 
<code class="language-plaintext highlighter-rouge">_to</code> attribute values of an existing edge could not be updated once the edge was
created. Additionally, the <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> attributes could not be indexed in
user-defined indexes, e.g. to make each combination of <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> unique.
Finally, as <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> referenced the linked collections by collection id
and not by collection name, their meaning became unclear once a referenced collection 
was dropped. The collection id stored in edges then became unusable, and when
accessing such edge the collection name part of it was always translated to <code class="language-plaintext highlighter-rouge">_undefined</code>.</p>

<p>In ArangoDB 3.0, the <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> values of edges are saved as regular strings.
This allows using <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> in user-defined indexes. Additionally this allows
updating the <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> values of existing edges. Furthermore, collections
referenced by <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> values may be dropped and re-created later. Any
<code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> values of edges pointing to such dropped collection are unaffected
by the drop operation now. Also note that renaming the collection referenced in
<code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> in ArangoDB 2.8 also relinked the edges. In 3.0 the edges are NOT
automatically relinked to the new collection anymore.</p>

<h2 id="documents">Documents</h2>

<p>Documents (in contrast to edges) cannot contain the attributes <code class="language-plaintext highlighter-rouge">_from</code> or <code class="language-plaintext highlighter-rouge">_to</code> on the
main level in ArangoDB 3.0. These attributes will be automatically removed when saving
documents (i.e. non-edges). <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> can be still used in sub-objects inside
documents.</p>

<p>The <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> attributes will of course be preserved and are still required when 
saving edges.</p>

<h2 id="aql">AQL</h2>

<h3 id="edges-handling">Edges handling</h3>

<p>When updating or replacing edges via AQL, any modifications to the <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code>
attributes of edges were ignored by previous versions of ArangoDB, without signaling
any errors. This was due to the <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> attributes being immutable in earlier
versions of ArangoDB.</p>

<p>From 3.0 on, the <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> attributes of edges are mutable, so any AQL queries that
modify the <code class="language-plaintext highlighter-rouge">_from</code> or <code class="language-plaintext highlighter-rouge">_to</code> attribute values of edges will attempt to actually change these
attributes. Clients should be aware of this change and should review their queries that
modify edges to rule out unintended side-effects.</p>

<p>Additionally, when completely replacing the data of existing edges via the AQL <code class="language-plaintext highlighter-rouge">REPLACE</code>
operation, it is now required to specify values for the <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> attributes,
as <code class="language-plaintext highlighter-rouge">REPLACE</code> requires the entire new document to be specified. If either <code class="language-plaintext highlighter-rouge">_from</code> or <code class="language-plaintext highlighter-rouge">_to</code>
are missing from the replacement document, an <code class="language-plaintext highlighter-rouge">REPLACE</code> operation will fail.</p>

<h4 id="graph-functions">Graph functions</h4>

<p>In version 3.0 all former graph related functions have been removed from AQL to
be replaced by <a href="https://www.arangodb.com/docs/stable/aql/graphs.html">native AQL constructs</a>.
These constructs allow for more fine-grained filtering on several graph levels.
Also this allows the AQL optimizer to automatically improve these queries by
enhancing them with appropriate indexes.
We have created recipes to upgrade from 2.8 to 3.0 when using these functions.</p>

<p>The functions:</p>

<ul>
  <li>GRAPH_COMMON_NEIGHBORS</li>
  <li>GRAPH_COMMON_PROPERTIES</li>
  <li>GRAPH_DISTANCE_TO</li>
  <li>GRAPH_EDGES</li>
  <li>GRAPH_NEIGHBORS</li>
  <li>GRAPH_TRAVERSAL</li>
  <li>GRAPH_TRAVERSAL_TREE</li>
  <li>GRAPH_SHORTEST_PATH</li>
  <li>GRAPH_PATHS</li>
  <li>GRAPH_VERTICES</li>
</ul>

<p>are covered in <a href="https://www.arangodb.com/docs/3.4/cookbook/aql-migrating-graph-functions-to3.html">Migrating GRAPH_* Functions from 2.8 or earlier to 3.0</a></p>

<ul>
  <li>GRAPH_ABSOLUTE_BETWEENNESS</li>
  <li>GRAPH_ABSOLUTE_CLOSENESS</li>
  <li>GRAPH_ABSOLUTE_ECCENTRICITY</li>
  <li>GRAPH_BETWEENNESS</li>
  <li>GRAPH_CLOSENESS</li>
  <li>GRAPH_DIAMETER</li>
  <li>GRAPH_ECCENTRICITY</li>
  <li>GRAPH_RADIUS</li>
</ul>

<p>are covered in <a href="https://www.arangodb.com/docs/3.4/cookbook/aql-migrating-measurements-to3.html">Migrating GRAPH_* Measurements from 2.8 or earlier to 3.0</a></p>

<ul>
  <li>EDGES</li>
  <li>NEIGHBORS</li>
  <li>PATHS</li>
  <li>TRAVERSAL</li>
  <li>TRAVERSAL_TREE</li>
</ul>

<p>are covered in <a href="https://www.arangodb.com/docs/3.4/cookbook/aql-migrating-edge-functions-to3.html">Migrating anonymous graph functions from 2.8 or earlier to 3.0</a></p>

<h3 id="typecasting-functions">Typecasting functions</h3>

<p>The type casting applied by the <code class="language-plaintext highlighter-rouge">TO_NUMBER()</code> AQL function has changed as follows:</p>
<ul>
  <li>string values that do not contain a valid numeric value are now converted to the number
<code class="language-plaintext highlighter-rouge">0</code>. In previous versions of ArangoDB such string values were converted to the value
<code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li>array values with more than 1 member are now converted to the number <code class="language-plaintext highlighter-rouge">0</code>. In previous
versions of ArangoDB such arrays were converted to the value <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li>objects / documents are now converted to the number <code class="language-plaintext highlighter-rouge">0</code>. In previous versions of ArangoDB
objects / documents were converted to the value <code class="language-plaintext highlighter-rouge">null</code>.</li>
</ul>

<p>Additionally, the <code class="language-plaintext highlighter-rouge">TO_STRING()</code> AQL function now converts <code class="language-plaintext highlighter-rouge">null</code> values into an empty string
(<code class="language-plaintext highlighter-rouge">""</code>) instead of the string <code class="language-plaintext highlighter-rouge">"null"</code>, which is more in line with <code class="language-plaintext highlighter-rouge">LENGTH(null)</code> returning
<code class="language-plaintext highlighter-rouge">0</code> and not <code class="language-plaintext highlighter-rouge">4</code> since v2.6.</p>

<p>The output of <code class="language-plaintext highlighter-rouge">TO_STRING()</code> has also changed for arrays and objects as follows:</p>

<ul>
  <li>
    <p>arrays are now converted into their JSON-stringify equivalents, e.g.</p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">[ ]</code> is now converted to <code class="language-plaintext highlighter-rouge">[]</code></li>
      <li><code class="language-plaintext highlighter-rouge">[ 1, 2, 3 ]</code> is now converted to <code class="language-plaintext highlighter-rouge">[1,2,3]</code></li>
      <li><code class="language-plaintext highlighter-rouge">[ "test", 1, 2 ] is now converted to </code>[test,1,2]`</li>
    </ul>

    <p>Previous versions of ArangoDB converted arrays with no members into the
empty string, and non-empty arrays into a comma-separated list of member
values, without the surrounding angular brackets. Additionally, string
array members were not enclosed in quotes in the result string:</p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">[ ]</code> was converted to ``</li>
      <li><code class="language-plaintext highlighter-rouge">[ 1, 2, 3 ]</code> was converted to <code class="language-plaintext highlighter-rouge">1,2,3</code></li>
      <li><code class="language-plaintext highlighter-rouge">[ "test", 1, 2 ] was converted to </code>test,1,2`</li>
    </ul>
  </li>
  <li>
    <p>objects are now converted to their JSON-stringify equivalents, e.g.</p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">{ }</code> is converted to <code class="language-plaintext highlighter-rouge">{}</code></li>
      <li><code class="language-plaintext highlighter-rouge">{ a: 1, b: 2 }</code> is converted to <code class="language-plaintext highlighter-rouge">{"a":1,"b":2}</code></li>
      <li><code class="language-plaintext highlighter-rouge">{ "test" : "foobar" }</code> is converted to <code class="language-plaintext highlighter-rouge">{"test":"foobar"}</code></li>
    </ul>

    <p>Previous versions of ArangoDB always converted objects into the string
<code class="language-plaintext highlighter-rouge">[object Object]</code></p>
  </li>
</ul>

<p>This change also affects other parts in AQL that used <code class="language-plaintext highlighter-rouge">TO_STRING()</code> to implicitly
cast operands to strings. It also affects the AQL functions <code class="language-plaintext highlighter-rouge">CONCAT()</code> and 
<code class="language-plaintext highlighter-rouge">CONCAT_SEPARATOR()</code> which treated array values differently. Previous versions
of ArangoDB automatically flattened array values in the first level of the array, 
e.g. <code class="language-plaintext highlighter-rouge">CONCAT([1, 2, 3, [ 4, 5, 6 ]])</code> produced <code class="language-plaintext highlighter-rouge">1,2,3,4,5,6</code>. Now this will produce
<code class="language-plaintext highlighter-rouge">[1,2,3,[4,5,6]]</code>. To flatten array members on the top level, you can now use
the more explicit <code class="language-plaintext highlighter-rouge">CONCAT(FLATTEN([1, 2, 3, [4, 5, 6]], 1))</code>.</p>

<h3 id="arithmetic-operators">Arithmetic operators</h3>

<p>As the arithmetic operations in AQL implicitly convert their operands to numeric values using 
<code class="language-plaintext highlighter-rouge">TO_NUMBER()</code>, their casting behavior has also changed as described above.</p>

<p>Some examples of the changed behavior:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">"foo" + 1</code> produces <code class="language-plaintext highlighter-rouge">1</code> now. In previous versions this produced <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">[ 1, 2 ] + 1</code> produces <code class="language-plaintext highlighter-rouge">1</code>. In previous versions this produced <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">1 + "foo" + 1 produces </code>2<code class="language-plaintext highlighter-rouge"> now. In previous version this produced </code>1`.</li>
</ul>

<h3 id="attribute-names-and-parameters">Attribute names and parameters</h3>

<p>Previous versions of ArangoDB had some trouble with attribute names that contained the dot
symbol (<code class="language-plaintext highlighter-rouge">.</code>). Some code parts in AQL used the dot symbol to split an attribute name into
sub-components, so an attribute named <code class="language-plaintext highlighter-rouge">a.b</code> was not completely distinguishable from an
attribute <code class="language-plaintext highlighter-rouge">a</code> with a sub-attribute <code class="language-plaintext highlighter-rouge">b</code>. This inconsistent behavior sometimes allowed hacks
to work such as passing sub-attributes in a bind parameter as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FOR doc IN collection
  FILTER doc.@name == 1
  RETURN doc
</code></pre></div></div>

<p>If the bind parameter <code class="language-plaintext highlighter-rouge">@name</code> contained the dot symbol (e.g. <code class="language-plaintext highlighter-rouge">@bind</code> = <code class="language-plaintext highlighter-rouge">a.b</code>, it was unclear 
whether this should trigger sub-attribute access (i.e. <code class="language-plaintext highlighter-rouge">doc.a.b</code>) or a access to an attribute 
with exactly the specified name (i.e. <code class="language-plaintext highlighter-rouge">doc["a.b"]</code>).</p>

<p>ArangoDB 3.0 now handles attribute names containing the dot symbol properly, and sending a
bind parameter <code class="language-plaintext highlighter-rouge">@name</code> = <code class="language-plaintext highlighter-rouge">a.b</code> will now always trigger an access to the attribute <code class="language-plaintext highlighter-rouge">doc["a.b"]</code>,
not the sub-attribute <code class="language-plaintext highlighter-rouge">b</code> of <code class="language-plaintext highlighter-rouge">a</code> in <code class="language-plaintext highlighter-rouge">doc</code>.</p>

<p>For users that used the hack of passing bind parameters containing dot symbol to access
sub-attributes, ArangoDB 3.0 allows specifying the attribute name parts as an array of strings,
e.g. <code class="language-plaintext highlighter-rouge">@name</code> = <code class="language-plaintext highlighter-rouge">[ "a", "b" ]</code>, which will be resolved to the sub-attribute access <code class="language-plaintext highlighter-rouge">doc.a.b</code> 
when the query is executed.</p>

<h3 id="keywords">Keywords</h3>

<p><code class="language-plaintext highlighter-rouge">LIKE</code> is now a keyword in AQL. Using <code class="language-plaintext highlighter-rouge">LIKE</code> in either case as an attribute or collection 
name in AQL queries now requires quoting.</p>

<p><code class="language-plaintext highlighter-rouge">SHORTEST_PATH</code> is now a keyword in AQL. Using <code class="language-plaintext highlighter-rouge">SHORTEST_PATH</code> in either case as an attribute or collection 
name in AQL queries now requires quoting.</p>

<h3 id="subqueries">Subqueries</h3>

<p>Queries that contain subqueries that contain data-modification operations such as <code class="language-plaintext highlighter-rouge">INSERT</code>, 
<code class="language-plaintext highlighter-rouge">UPDATE</code>, <code class="language-plaintext highlighter-rouge">REPLACE</code>, <code class="language-plaintext highlighter-rouge">UPSERT</code> or <code class="language-plaintext highlighter-rouge">REMOVE</code> will now refuse to execute if the collection
affected by the subquerys data-modification operation is read-accessed in an outer scope 
of the query.</p>

<p>For example, the following query will refuse to execute as the collection <code class="language-plaintext highlighter-rouge">myCollection</code>
is modified in the subquery but also read-accessed in the outer scope:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FOR doc IN myCollection
  LET changes = (
    FOR what IN myCollection
      FILTER what.value == 1
      REMOVE what IN myCollection
  )
  RETURN doc
</code></pre></div></div>

<p>It is still possible to write to collections from which data is read in the same query,
e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FOR doc IN myCollection
  FILTER doc.value == 1
  REMOVE doc IN myCollection
</code></pre></div></div>

<p>and to modify data in different collection via subqueries.</p>

<h3 id="other-changes">Other changes</h3>

<p>The AQL optimizer rule merge-traversal-filter that already existed in 3.0 was renamed to 
optimize-traversals. This should be of no relevance to client applications except if 
they programatically look for applied optimizer rules in the explain out of AQL queries.</p>

<p>The order of results created by the AQL functions <code class="language-plaintext highlighter-rouge">VALUES()</code> and <code class="language-plaintext highlighter-rouge">ATTRIBUTES()</code> was never 
guaranteed and it only had the correct ordering by accident when iterating over objects 
that were not loaded from the database. As some of the function internals have changed, the
correct ordering will not appear anymore, and still no result order is guaranteed by
these functions unless the <code class="language-plaintext highlighter-rouge">sort</code> parameter is specified (for the <code class="language-plaintext highlighter-rouge">ATTRIBUTES()</code> function).</p>

<h2 id="upgraded-v8-version">Upgraded V8 version</h2>

<p>The V8 engine that is used inside ArangoDB to execute JavaScript code has been upgraded from
version 4.3.61 to 5.0.71.39. The new version should be mostly compatible to the old version,
but there may be subtle differences, including changes of error message texts thrown by the
engine.
Furthermore, some V8 startup parameters have changed their meaning or have been removed in
the new version. This is only relevant when ArangoDB or ArangoShell are started with a custom
value for the <code class="language-plaintext highlighter-rouge">--javascript.v8-options</code> startup option.</p>

<p>Among others, the following V8 options change in the new version of ArangoDB:</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">--es_staging</code>: in 2.8 it had the meaning <code class="language-plaintext highlighter-rouge">enable all completed harmony features</code>, in 3.0 
the option means <code class="language-plaintext highlighter-rouge">enable test-worthy harmony features (for internal use only)</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">--strong_this</code>: this option wasnt present in 2.8. In 3.0 it means <code class="language-plaintext highlighter-rouge">don't allow 'this' to
escape from constructors</code> and defaults to true.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">--harmony_regexps</code>: this options means <code class="language-plaintext highlighter-rouge">enable "harmony regular expression extensions"</code> 
and changes its default value from false to true</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">--harmony_proxies</code>: this options means <code class="language-plaintext highlighter-rouge">enable "harmony proxies"</code> and changes its default 
 value from false to true</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">--harmony_reflect</code>: this options means <code class="language-plaintext highlighter-rouge">enable "harmony Reflect API"</code> and changes its 
default value from false to true</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">--harmony_sloppy</code>: this options means <code class="language-plaintext highlighter-rouge">enable "harmony features in sloppy mode"</code> and 
changes its default value from false to true</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">--harmony_tostring</code>: this options means <code class="language-plaintext highlighter-rouge">enable "harmony toString"</code> and changes its 
default value from false to true</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">--harmony_unicode_regexps</code>: this options means <code class="language-plaintext highlighter-rouge">enable "harmony unicode regexps"</code> and 
changes its default value from false to true</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">--harmony_arrays</code>, <code class="language-plaintext highlighter-rouge">--harmony_array_includes</code>, <code class="language-plaintext highlighter-rouge">--harmony_computed_property_names</code>, 
<code class="language-plaintext highlighter-rouge">--harmony_arrow_functions</code>, <code class="language-plaintext highlighter-rouge">--harmony_rest_parameters</code>, <code class="language-plaintext highlighter-rouge">--harmony_classes</code>, 
<code class="language-plaintext highlighter-rouge">--harmony_object_literals</code>, <code class="language-plaintext highlighter-rouge">--harmony_numeric_literals</code>, <code class="language-plaintext highlighter-rouge">--harmony_unicode</code>:
 these option have been removed in V8 5.</p>
  </li>
</ul>

<p>As a consequence of the upgrade to V8 version 5, the implementation of the
JavaScript <code class="language-plaintext highlighter-rouge">Buffer</code> object had to be changed. JavaScript <code class="language-plaintext highlighter-rouge">Buffer</code> objects in
ArangoDB now always store their data on the heap. There is no shared pool
for small Buffer values, and no pointing into existing Buffer data when
extracting slices. This change may increase the cost of creating Buffers with
short contents or when peeking into existing Buffers, but was required for
safer memory management and to prevent leaks.</p>

<h2 id="javascript-api-changes">JavaScript API changes</h2>

<p>The following incompatible changes have been made to the JavaScript API in ArangoDB 3.0:</p>

<h3 id="foxx">Foxx</h3>

<p>The Foxx framework has been completely rewritten for 3.0 with a new, simpler and more 
familiar API. To make Foxx services developed for 2.8 or earlier ArangoDB versions run in 3.0, the services manifest file needs to be edited.</p>

<p>To enable the legacy mode for a Foxx service, add <code class="language-plaintext highlighter-rouge">"engines": {"arangodb": "^2.8.0"}</code> 
(or similar version ranges that exclude 3.0 and up) to the service manifest file
(named manifest.json, located in the services base directory).</p>

<h3 id="require">Require</h3>

<p>Modules shipped with ArangoDB can now be required using the pattern <code class="language-plaintext highlighter-rouge">@arangodb/&lt;module&gt;</code>
instead of <code class="language-plaintext highlighter-rouge">org/arangodb/&lt;module&gt;</code>, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">cluster</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@arangodb/cluster</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>The old format can still be used for compatibility:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">cluster</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">org/arangodb/cluster</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>ArangoDB prior to version 3.0 allowed a transparent use of CoffeeScript
source files with the <code class="language-plaintext highlighter-rouge">require()</code> function. Files with a file name extension
of <code class="language-plaintext highlighter-rouge">coffee</code> were automatically sent through a CoffeeScript parser and
transpiled into JavaScript on-the-fly. This support is gone with ArangoDB
3.0. To run any CoffeeScript source files, they must be converted to JavaScript
by the client application.</p>

<h3 id="response-object">Response object</h3>

<p>The <code class="language-plaintext highlighter-rouge">@arangodb/request</code> response object now stores the parsed JSON response
body in a property <code class="language-plaintext highlighter-rouge">json</code> instead of <code class="language-plaintext highlighter-rouge">body</code> when the request was made using the
<code class="language-plaintext highlighter-rouge">json</code> option. The <code class="language-plaintext highlighter-rouge">body</code> instead contains the response body as a string.</p>

<h3 id="javascript-edges-api">JavaScript Edges API</h3>

<p>When completely replacing an edge via a collections <code class="language-plaintext highlighter-rouge">replace()</code> function the replacing 
edge data now needs to contain the <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> attributes for the new edge. Previous
versions of ArangoDB did not require the edge data to contain <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> attributes
when replacing an edge, since <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> values were immutable for existing edges.</p>

<p>For example, the following call worked in ArangoDB 2.8 but will fail in 3.0:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">db</span><span class="p">.</span><span class="nx">edgeCollection</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">myKey</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span> <span class="p">});</span>
</code></pre></div></div>

<p>To make this work in ArangoDB 3.0, <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> need to be added to the replacement
data:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">db</span><span class="p">.</span><span class="nx">edgeCollection</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">myKey</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">_from</span><span class="p">:</span> <span class="dl">"</span><span class="s2">myVertexCollection/1</span><span class="dl">"</span><span class="p">,</span> <span class="na">_to</span><span class="p">:</span> <span class="dl">"</span><span class="s2">myVertexCollection/2</span><span class="dl">"</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span> <span class="p">});</span>
</code></pre></div></div>

<p>Note that this only affects the <code class="language-plaintext highlighter-rouge">replace()</code> function but not <code class="language-plaintext highlighter-rouge">update()</code>, which will
only update the specified attributes of the edge and leave all others intact.</p>

<p>Additionally, the functions <code class="language-plaintext highlighter-rouge">edges()</code>, <code class="language-plaintext highlighter-rouge">outEdges()</code> and <code class="language-plaintext highlighter-rouge">inEdges()</code> with an array of edge 
ids will now make the edge ids unique before returning the connected edges. This is probably 
desired anyway, as results will be returned only once per distinct input edge id. However, 
it may break client applications that rely on the old behavior.</p>

<h3 id="databases-api">Databases API</h3>

<p>The <code class="language-plaintext highlighter-rouge">_listDatabases()</code> function of the <code class="language-plaintext highlighter-rouge">db</code> object has been renamed to <code class="language-plaintext highlighter-rouge">_databases()</code>, making it 
consistent with the <code class="language-plaintext highlighter-rouge">_collections()</code> function. Also the <code class="language-plaintext highlighter-rouge">_listEndpoints()</code> function has been 
renamed to <code class="language-plaintext highlighter-rouge">_endpoints()</code>.</p>

<h3 id="collection-api">Collection API</h3>

<h4 id="example-matching">Example matching</h4>

<p>The collection function <code class="language-plaintext highlighter-rouge">byExampleHash()</code> and <code class="language-plaintext highlighter-rouge">byExampleSkiplist()</code> have been removed in 3.0.
Their functionality is provided by collections <code class="language-plaintext highlighter-rouge">byExample()</code> function, which will automatically
use a suitable index if present.</p>

<p>The collection function <code class="language-plaintext highlighter-rouge">byConditionSkiplist()</code> has been removed in 3.0. The same functionality
can be achieved by issuing an AQL query with the target condition, which will automatically use
a suitable index if present.</p>

<h4 id="javascript-revision-id-handling">Javascript Revision id handling</h4>

<p>The <code class="language-plaintext highlighter-rouge">exists()</code> method of a collection now throws an exception when the specified document
exists but its revision id does not match the revision id specified. Previous versions of
ArangoDB simply returned <code class="language-plaintext highlighter-rouge">false</code> if either no document existed with the specified key or
when the revision id did not match. It was therefore impossible to distinguish these two
cases from the return value alone. 3.0 corrects this. Additionally, <code class="language-plaintext highlighter-rouge">exists()</code> in previous
versions always returned a boolean if only the document key was given. 3.0 now returns the
documents meta-data, which includes the documents current revision id.</p>

<p>Given there is a document with key <code class="language-plaintext highlighter-rouge">test</code> in collection <code class="language-plaintext highlighter-rouge">myCollection</code>, then the behavior
of 3.0 is as follows:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* test if document exists. this returned true in 2.8 */</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">myCollection</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span><span class="dl">"</span><span class="s2">test</span><span class="dl">"</span><span class="p">);</span>
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">_key</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">myCollection/test</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">_rev</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">9758059</span><span class="dl">"</span>
<span class="p">}</span>

<span class="cm">/* test if document exists. this returned true in 2.8 */</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">myCollection</span><span class="p">.</span><span class="nx">exists</span><span class="p">({</span> <span class="na">_key</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span> <span class="p">});</span>
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">_key</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">myCollection/test</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">_rev</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">9758059</span><span class="dl">"</span>
<span class="p">}</span>

<span class="cm">/* test if document exists. this also returned false in 2.8 */</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">myCollection</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span><span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">);</span>
<span class="kc">false</span>

<span class="cm">/* test if document with a given revision id exists. this returned true in 2.8 */</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">myCollection</span><span class="p">.</span><span class="nx">exists</span><span class="p">({</span> <span class="na">_key</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span><span class="p">,</span> <span class="na">_rev</span><span class="p">:</span> <span class="dl">"</span><span class="s2">9758059</span><span class="dl">"</span> <span class="p">});</span>
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">_key</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">myCollection/test</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">_rev</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">9758059</span><span class="dl">"</span>
<span class="p">}</span>

<span class="cm">/* test if document with a given revision id exists. this returned false in 2.8 */</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">myCollection</span><span class="p">.</span><span class="nx">exists</span><span class="p">({</span> <span class="na">_key</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test</span><span class="dl">"</span><span class="p">,</span> <span class="na">_rev</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1234</span><span class="dl">"</span> <span class="p">});</span>
<span class="nx">JavaScript</span> <span class="nx">exception</span><span class="p">:</span> <span class="nx">ArangoError</span> <span class="mi">1200</span><span class="p">:</span> <span class="nx">conflict</span>
</code></pre></div></div>

<h4 id="cap-constraints">Cap constraints</h4>

<p>The cap constraints feature has been removed. This change has led to the removal of the
collection operations <code class="language-plaintext highlighter-rouge">first()</code> and <code class="language-plaintext highlighter-rouge">last()</code>, which were internally based on data from 
cap constraints.</p>

<p>As cap constraints have been removed in ArangoDB 3.0 it is not possible to create an
index of type cap with a collections <code class="language-plaintext highlighter-rouge">ensureIndex()</code> function. The dedicated function
<code class="language-plaintext highlighter-rouge">ensureCapConstraint()</code> has also been removed from the collection API.</p>

<h4 id="graph-blueprints-js-module">Graph Blueprints JS Module</h4>

<p>The deprecated module <code class="language-plaintext highlighter-rouge">graph-blueprints</code> has been deleted.
All its features are covered by the <code class="language-plaintext highlighter-rouge">general-graph</code> module.</p>

<h4 id="general-graph-fluent-aql-interface">General Graph Fluent AQL interface</h4>

<p>The fluent interface has been removed from ArangoDB.
Its features were completely overlapping with <a href="https://github.com/arangodb/aqbjs" target="_blank">aqb</a>
which comes pre installed as well.
Please switch to AQB instead.</p>

<h4 id="undocumented-apis">Undocumented APIs</h4>

<p>The undocumented functions <code class="language-plaintext highlighter-rouge">BY_EXAMPLE_HASH()</code> and <code class="language-plaintext highlighter-rouge">BY_EXAMPLE_SKIPLIST()</code>,
<code class="language-plaintext highlighter-rouge">BY_CONDITION_SKIPLIST</code>, <code class="language-plaintext highlighter-rouge">CPP_NEIGHBORS</code> and <code class="language-plaintext highlighter-rouge">CPP_SHORTEST_PATH</code> have been removed.
These functions were always hidden and not intended to be part of
the public JavaScript API for collections.</p>

<h2 id="http-api-changes">HTTP API changes</h2>

<h3 id="crud-operations">CRUD operations</h3>

<p>The following incompatible changes have been made to the HTTP API in ArangoDB 3.0:</p>

<h4 id="general">General</h4>

<p>The HTTP insert operations for single documents and edges (POST <code class="language-plaintext highlighter-rouge">/_api/document</code>) do 
not support the URL parameter createCollection anymore. In previous versions of
ArangoDB this parameter could be used to automatically create a collection upon
insertion of the first document. It is now required that the target collection already
exists when using this API, otherwise it will return an HTTP 404 error.
The same is true for the import API at POST <code class="language-plaintext highlighter-rouge">/_api/import</code>.</p>

<p>Collections can still be created easily via a separate call to POST <code class="language-plaintext highlighter-rouge">/_api/collection</code>
as before.</p>

<p>The location HTTP header returned by ArangoDB when inserting a new document or edge
now always contains the database name. This was also the default behavior in previous
versions of ArangoDB, but it could be overridden by clients sending the HTTP header
<code class="language-plaintext highlighter-rouge">x-arango-version: 1.4</code> in the request. Clients can continue to send this header to
ArangoDB 3.0, but the header will not influence the location response headers produced 
by ArangoDB 3.0 anymore.</p>

<p>Additionally the CRUD operations APIs do not return an attribute error in the
response body with an attribute value of false in case an operation succeeded.</p>

<h4 id="revision-id-handling">Revision id handling</h4>

<p>The operations for updating, replacing and removing documents can optionally check the
revision number of the document to be updated, replaced or removed so the caller can
ensure the operation works on a specific version of the document and there are no
lost updates.</p>

<p>Previous versions of ArangoDB allowed passing the revision id of the previous document
either in the HTTP header <code class="language-plaintext highlighter-rouge">If-Match</code> or in the URL parameter <code class="language-plaintext highlighter-rouge">rev</code>. For example, 
removing a document with a specific revision id could be achieved as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -X DELETE \
     "http://127.0.0.1:8529/_api/document/myCollection/myKey?rev=123"
</code></pre></div></div>

<p>ArangoDB 3.0 does not support passing the revision id via the rev URL parameter
anymore. Instead the previous revision id must be passed in the HTTP header <code class="language-plaintext highlighter-rouge">If-Match</code>,
e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -X DELETE \
     --header "If-Match: '123'" \
     "http://127.0.0.1:8529/_api/document/myCollection/myKey"
</code></pre></div></div>

<p>The URL parameter policy was also usable in previous versions of ArangoDB to
control revision handling. Using it was redundant to specifying the expected revision
id via the rev parameter or If-Match HTTP header and therefore support for the policy
parameter was removed in 3.0.</p>

<p>In order to check for a previous revision id when updating, replacing or removing 
documents please use the <code class="language-plaintext highlighter-rouge">If-Match</code> HTTP header as described above. When no revision
check if required the HTTP header can be omitted, and the operations will work on the
current revision of the document, regardless of its revision id.</p>

<h3 id="all-documents-api">All documents API</h3>

<p>The HTTP API for retrieving the ids, keys or URLs of all documents from a collection
was previously located at GET <code class="language-plaintext highlighter-rouge">/_api/document?collection=...</code>. This API was moved to
PUT <code class="language-plaintext highlighter-rouge">/_api/simple/all-keys</code> and is now executed as an AQL query.
The name of the collection must now be passed in the HTTP request body instead of in
the request URL. The same is true for the type parameter, which controls the type of
the result to be created.</p>

<p>Calls to the previous API can be translated as follows:</p>

<ul>
  <li>old: GET <code class="language-plaintext highlighter-rouge">/_api/document?collection=&lt;collection&gt;&amp;type=&lt;type&gt;</code> without HTTP request body</li>
  <li>3.0: PUT <code class="language-plaintext highlighter-rouge">/_api/simple/all-keys</code> with HTTP request body <code class="language-plaintext highlighter-rouge">{"collection":"&lt;collection&gt;","type":"id"}</code></li>
</ul>

<p>The result format of this API has also changed slightly. In previous versions calls to
the API returned a JSON object with a <code class="language-plaintext highlighter-rouge">documents</code> attribute. As the functionality is
based on AQL internally in 3.0, the API now returns a JSON object with a <code class="language-plaintext highlighter-rouge">result</code> attribute.</p>

<h3 id="edges-api">Edges API</h3>

<h4 id="crud-operations-on-edges">CRUD operations on edges</h4>

<p>The API for documents and edges have been unified in ArangoDB 3.0. The CRUD operations 
for documents and edges are now handled by the same endpoint at <code class="language-plaintext highlighter-rouge">/_api/document</code>. For 
CRUD operations there is no distinction anymore between documents and edges API-wise.</p>

<p>That means CRUD operations concerning edges need to be sent to the HTTP endpoint 
<code class="language-plaintext highlighter-rouge">/_api/document</code> instead of <code class="language-plaintext highlighter-rouge">/_api/edge</code>. Sending requests to <code class="language-plaintext highlighter-rouge">/_api/edge</code> will
result in an HTTP 404 error in 3.0. The following methods are available at
<code class="language-plaintext highlighter-rouge">/_api/document</code> for documents and edge:</p>

<ul>
  <li>HTTP POST: insert new document or edge</li>
  <li>HTTP GET: fetch an existing document or edge</li>
  <li>HTTP PUT: replace an existing document or edge</li>
  <li>HTTP PATCH: partially update an existing document or edge</li>
  <li>HTTP DELETE: remove an existing document or edge</li>
</ul>

<p>When completely replacing an edge via HTTP PUT please note that the replacing edge
data now needs to contain the <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> attributes for the edge. Previous
versions of ArangoDB did not require sending <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> when replacing edges, 
as <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> values were immutable for existing edges.</p>

<p>The <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> attributes of edges now also need to be present inside the
edges objects sent to the server:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -X POST \
     --data '{"value":1,"_from":"myVertexCollection/1","_to":"myVertexCollection/2"}' \
     "http://127.0.0.1:8529/_api/document?collection=myEdgeCollection"
</code></pre></div></div>

<p>Previous versions of ArangoDB required the <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> attributes of edges be 
sent separately in URL parameter <code class="language-plaintext highlighter-rouge">from</code> and <code class="language-plaintext highlighter-rouge">to</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -X POST \
     --data '{"value":1}' \
     "http://127.0.0.1:8529/_api/edge?collection=e&amp;from=myVertexCollection/1&amp;to=myVertexCollection/2" 
</code></pre></div></div>

<h4 id="querying-connected-edges">Querying connected edges</h4>

<p>The REST API for querying connected edges at GET <code class="language-plaintext highlighter-rouge">/_api/edges/&lt;collection&gt;</code> will now
make the edge ids unique before returning the connected edges. This is probably desired anyway
as results will now be returned only once per distinct input edge id. However, it may break 
client applications that rely on the old behavior.</p>

<h4 id="graph-api">Graph API</h4>

<p>Some data-modification operations in the named graphs API at <code class="language-plaintext highlighter-rouge">/_api/gharial</code> now return either
HTTP 202 (Accepted) or HTTP 201 (Created) if the operation succeeds. Which status code is returned
depends on the <code class="language-plaintext highlighter-rouge">waitForSync</code> attribute of the affected collection. In previous versions some
of these operations return HTTP 200 regardless of the <code class="language-plaintext highlighter-rouge">waitForSync</code> value.</p>

<p>The deprecated graph API <code class="language-plaintext highlighter-rouge">/_api/graph</code> has been removed.
All its features can be replaced using <code class="language-plaintext highlighter-rouge">/_api/gharial</code> and AQL instead.</p>

<h3 id="simple-queries-api">Simple queries API</h3>

<p>The REST routes PUT <code class="language-plaintext highlighter-rouge">/_api/simple/first</code> and <code class="language-plaintext highlighter-rouge">/_api/simple/last</code> have been removed
entirely. These APIs were responsible for returning the first-inserted and
last-inserted documents in a collection. This feature was built on cap constraints
internally, which have been removed in 3.0.</p>

<p>Calling one of these endpoints in 3.0 will result in an HTTP 404 error.</p>

<h3 id="indexes-api">Indexes API</h3>

<p>It is not supported in 3.0 to create an index with type <code class="language-plaintext highlighter-rouge">cap</code> (cap constraint) in 
3.0 as the cap constraints feature has bee removed. Calling the index creation
endpoint HTTP API POST <code class="language-plaintext highlighter-rouge">/_api/index?collection=...</code> with an index type <code class="language-plaintext highlighter-rouge">cap</code> will 
therefore result in an HTTP 400 error.</p>

<h3 id="log-entries-api">Log entries API</h3>

<p>The REST route HTTP GET <code class="language-plaintext highlighter-rouge">/_admin/log</code> is now accessible from within all databases. In
previous versions of ArangoDB, this route was accessible from within the <code class="language-plaintext highlighter-rouge">_system</code>
database only, and an HTTP 403 (Forbidden) was thrown by the server for any access
from within another database.</p>

<h3 id="figures-api">Figures API</h3>

<p>The REST route HTTP GET <code class="language-plaintext highlighter-rouge">/_api/collection/&lt;collection&gt;/figures</code> will not return the 
following result attributes as they became meaningless in 3.0:</p>

<ul>
  <li>shapefiles.count</li>
  <li>shapes.fileSize</li>
  <li>shapes.count</li>
  <li>shapes.size</li>
  <li>attributes.count</li>
  <li>attributes.size</li>
</ul>

<h3 id="databases-and-collections-apis">Databases and Collections APIs</h3>

<p>When creating a database via the API POST <code class="language-plaintext highlighter-rouge">/_api/database</code>, ArangoDB will now always
return the HTTP status code 202 (created) if the operation succeeds. Previous versions
of ArangoDB returned HTTP 202 as well, but this behavior was changable by sending an
HTTP header <code class="language-plaintext highlighter-rouge">x-arango-version: 1.4</code>. When sending this header, previous versions of
ArangoDB returned an HTTP status code 200 (ok). Clients can still send this header to
ArangoDB 3.0 but this will not influence the HTTP status code produced by ArangoDB.</p>

<p>The location header produced by ArangoDB 3.0 will now always contain the database 
name. This was also the default in previous versions of ArangoDB, but the behavior
could be overridden by sending the HTTP header <code class="language-plaintext highlighter-rouge">x-arango-version: 1.4</code>. Clients can
still send the header, but this will not make the database name in the location
response header disappear.</p>

<p>The result format for querying all collections via the API GET <code class="language-plaintext highlighter-rouge">/_api/collection</code> 
has been changed.</p>

<p>Previous versions of ArangoDB returned an object with an attribute named <code class="language-plaintext highlighter-rouge">collections</code> 
and an attribute named <code class="language-plaintext highlighter-rouge">names</code>. Both contained all available collections, but
<code class="language-plaintext highlighter-rouge">collections</code> contained the collections as an array, and <code class="language-plaintext highlighter-rouge">names</code> contained the
collections again, contained in an object in which the attribute names were the
collection names, e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "collections": [
    {"id":"5874437","name":"test","isSystem":false,"status":3,"type":2},
    {"id":"17343237","name":"something","isSystem":false,"status":3,"type":2},
    ...
  ],
  "names": {
    "test": {"id":"5874437","name":"test","isSystem":false,"status":3,"type":2},
    "something": {"id":"17343237","name":"something","isSystem":false,"status":3,"type":2},
    ...
  }
}
</code></pre></div></div>
<p>This result structure was redundant, and therefore has been simplified to just</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "result": [
    {"id":"5874437","name":"test","isSystem":false,"status":3,"type":2},
    {"id":"17343237","name":"something","isSystem":false,"status":3,"type":2},
    ...
  ]
}
</code></pre></div></div>

<p>in ArangoDB 3.0.</p>

<h3 id="replication-apis">Replication APIs</h3>

<p>The URL parameter failOnUnknown was removed from the REST API GET <code class="language-plaintext highlighter-rouge">/_api/replication/dump</code>.
This parameter controlled whether dumping or replicating edges should fail if one
of the vertex collections linked in the edges <code class="language-plaintext highlighter-rouge">_from</code> or <code class="language-plaintext highlighter-rouge">_to</code> attributes was not
present anymore. In this case the <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> values could not be translated into
meaningful ids anymore.</p>

<p>There were two ways for handling this:</p>
<ul>
  <li>setting <code class="language-plaintext highlighter-rouge">failOnUnknown</code> to <code class="language-plaintext highlighter-rouge">true</code> caused the HTTP request to fail, leaving error 
handling to the user</li>
  <li>setting <code class="language-plaintext highlighter-rouge">failOnUnknown</code> to <code class="language-plaintext highlighter-rouge">false</code> caused the HTTP request to continue, translating
the collection name part in the <code class="language-plaintext highlighter-rouge">_from</code> or <code class="language-plaintext highlighter-rouge">_to</code> value to <code class="language-plaintext highlighter-rouge">_unknown</code>.</li>
</ul>

<p>In ArangoDB 3.0 this parameter is obsolete, as <code class="language-plaintext highlighter-rouge">_from</code> and <code class="language-plaintext highlighter-rouge">_to</code> are stored as self-contained
string values all the time, so they cannot get invalid when referenced collections are
dropped.</p>

<p>The result format of the API GET <code class="language-plaintext highlighter-rouge">/_api/replication/logger-follow</code> has changed slightly in
the following aspects:</p>

<ul>
  <li>documents and edges are reported in the same way. The type for document insertions/updates
and edge insertions/updates is now always <code class="language-plaintext highlighter-rouge">2300</code>. Previous versions of ArangoDB returned
a <code class="language-plaintext highlighter-rouge">type</code> value of <code class="language-plaintext highlighter-rouge">2300</code> for documents and <code class="language-plaintext highlighter-rouge">2301</code> for edges.</li>
  <li>records about insertions, updates or removals of documents and edges do not have the
<code class="language-plaintext highlighter-rouge">key</code> and <code class="language-plaintext highlighter-rouge">rev</code> attributes on the top-level anymore. Instead, <code class="language-plaintext highlighter-rouge">key</code> and <code class="language-plaintext highlighter-rouge">rev</code> can be 
accessed by peeking into the <code class="language-plaintext highlighter-rouge">_key</code> and <code class="language-plaintext highlighter-rouge">_rev</code> attributes of the <code class="language-plaintext highlighter-rouge">data</code> sub-attributes
of the change record.</li>
</ul>

<p>The same is true for the collection-specific changes API GET <code class="language-plaintext highlighter-rouge">/_api/replication/dump</code>.</p>

<h3 id="user-management-apis">User management APIs</h3>

<p>The REST API endpoint POST <code class="language-plaintext highlighter-rouge">/_api/user</code> for adding new users now requires the request to
contain a JSON object with an attribute named <code class="language-plaintext highlighter-rouge">user</code>, containing the name of the user to
be created. Previous versions of ArangoDB also checked this attribute, but additionally 
looked for an attribute <code class="language-plaintext highlighter-rouge">username</code> if the <code class="language-plaintext highlighter-rouge">user</code> attribute did not exist.</p>

<h3 id="undocumented-http-apis">Undocumented HTTP APIs</h3>

<p>The following undocumented HTTP REST endpoints have been removed from ArangoDBs REST
API:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">/_open/cerberus</code> and <code class="language-plaintext highlighter-rouge">/_system/cerberus</code>: these endpoints were intended for some 
ArangoDB-internal applications only</li>
  <li>PUT <code class="language-plaintext highlighter-rouge">/_api/simple/by-example-hash</code>, PUT <code class="language-plaintext highlighter-rouge">/_api/simple/by-example-skiplist</code> and
PUT <code class="language-plaintext highlighter-rouge">/_api/simple/by-condition-skiplist</code>: these methods were documented in early
versions of ArangoDB but have been marked as not intended to be called by end
users since ArangoDB version 2.3. These methods should not have been part of any
ArangoDB manual since version 2.4.</li>
  <li><code class="language-plaintext highlighter-rouge">/_api/structure</code>: an older unfinished and unpromoted API for data format and type 
checks, superseded by Foxx applications.</li>
</ul>

<h3 id="administration-apis">Administration APIs</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">/_admin/shutdown</code> now needs to be called with the HTTP DELETE method</li>
</ul>

<h3 id="handling-of-cors-requests">Handling of CORS requests</h3>

<p>It can now be controlled in detail for which origin hosts CORS (Cross-origin resource 
sharing) requests with credentials will be allowed. ArangoDB 3.0 provides the startup
option <code class="language-plaintext highlighter-rouge">--http.trusted-origin</code> that can be used to specify one or many origins from
which CORS requests are treated as trustworthy.</p>

<p>The option can be specified multiple times, once per trusted origin, e.g.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--http.trusted-origin http://127.0.0.1:8529 --http.trusted-origin https://127.0.0.1:8599
</code></pre></div></div>

<p>This will make the ArangoDB server respond to CORS requests from these origins with an
<code class="language-plaintext highlighter-rouge">Access-Control-Allow-Credentials</code> HTTP header with a value of <code class="language-plaintext highlighter-rouge">true</code>. Web browsers can
inspect this header and can allow passing ArangoDB web interface credentials (if stored 
in the browser) to the requesting site. ArangoDB will not forward or provide any credentials.</p>

<p>Setting this option is only required if applications on other hosts need to access the 
ArangoDB web interface or other HTTP REST APIs from a web browser with the same credentials 
that the user has entered when logging into the web interface. When a web browser finds 
the <code class="language-plaintext highlighter-rouge">Access-Control-Allow-Credentials</code> HTTP response header, it may forward the credentials
entered into the browser for the ArangoDB web interface login to the other site.</p>

<p>This is a potential security issue, so there are no trusted origins by default. It may
be required to set some trusted origins if youre planning to issue AJAX requests to ArangoDB
from other sites from the browser, with the credentials entered during the ArangoDB interface 
login (i.e. single sign-on). If such functionality is not used, the option should not
be set.</p>

<p>To specify a trusted origin, specify the option once per trusted origin as shown above.
Note that the trusted origin values specified in this option will be compared bytewise
with the <code class="language-plaintext highlighter-rouge">Origin</code> HTTP header value sent by clients, and only exact matches will pass.</p>

<p>There is also the wildcard <code class="language-plaintext highlighter-rouge">all</code> for enabling CORS access from all origins in a 
test or development setup:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--http.trusted-origin all
</code></pre></div></div>

<p>Setting this option will lead to the ArangoDB server responding with an 
<code class="language-plaintext highlighter-rouge">Access-Control-Allow-Credentials: true</code> HTTP header to all incoming CORS requests.</p>

<h2 id="command-line-options">Command-line options</h2>

<p>Quite a few startup options in ArangoDB 2 were double negations (like
<code class="language-plaintext highlighter-rouge">--server.disable-authentication false</code>). In ArangoDB 3 these are now expressed as 
positives (e. g. <code class="language-plaintext highlighter-rouge">--server.authentication</code>). Also the options between the ArangoDB
server and its client tools have being unified. For example, the logger options are 
now the same for the server and the client tools. Additionally many options have
been moved into more appropriate topic sections.</p>

<h3 id="renamed-options">Renamed options</h3>

<p>The following options have been available before 3.0 and have changed their name 
in 3.0:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">--server.disable-authentication</code> was renamed to <code class="language-plaintext highlighter-rouge">--server.authentication</code>.
Note that the meaning of the option <code class="language-plaintext highlighter-rouge">--server.authentication</code> is the opposite of 
the previous <code class="language-plaintext highlighter-rouge">--server.disable-authentication</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.disable-authentication-unix-sockets</code> was renamed to
<code class="language-plaintext highlighter-rouge">--server.authentication-unix-sockets</code>. Note that the meaning of the option
<code class="language-plaintext highlighter-rouge">--server.authentication-unix-sockets</code> is the opposite of the previous
<code class="language-plaintext highlighter-rouge">--server.disable-authentication-unix-sockets</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.authenticate-system-only</code> was renamed to <code class="language-plaintext highlighter-rouge">--server.authentication-system-only</code>.
The meaning of the option in unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.disable-statistics</code> was renamed to <code class="language-plaintext highlighter-rouge">--server.statistics</code>. Note that the
meaning of the option <code class="language-plaintext highlighter-rouge">--server.statistics</code> is the opposite of the previous
<code class="language-plaintext highlighter-rouge">--server.disable-statistics</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.cafile</code> was renamed to <code class="language-plaintext highlighter-rouge">--ssl.cafile</code>. The meaning of the option is
unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.keyfile</code> was renamed to <code class="language-plaintext highlighter-rouge">--ssl.keyfile</code>. The meaning of the option is
unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.ssl-cache</code> was renamed to <code class="language-plaintext highlighter-rouge">--ssl.session-cache</code>. The meaning of the option
is unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.ssl-cipher-list</code> was renamed to <code class="language-plaintext highlighter-rouge">--ssl.cipher-list</code>. The meaning of the
option is unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.ssl-options</code> was renamed to <code class="language-plaintext highlighter-rouge">--ssl.options</code>. The meaning of the option
is unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.ssl-protocol</code> was renamed to <code class="language-plaintext highlighter-rouge">--ssl.protocol</code>. The meaning of the option
is unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.backlog-size</code> was renamed to <code class="language-plaintext highlighter-rouge">--tcp.backlog-size</code>. The meaning of the
option is unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.reuse-address</code> was renamed to <code class="language-plaintext highlighter-rouge">--tcp.reuse-address</code>. The meaning of the
option is unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.disable-replication-applier</code> was renamed to <code class="language-plaintext highlighter-rouge">--database.replication-applier</code>.
The meaning of the option <code class="language-plaintext highlighter-rouge">--database.replication-applier</code> is the opposite of the
previous <code class="language-plaintext highlighter-rouge">--server.disable-replication-applier</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.allow-method-override</code> was renamed to <code class="language-plaintext highlighter-rouge">--http.allow-method-override</code>. The
meaning of the option is unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.hide-product-header</code> was renamed to <code class="language-plaintext highlighter-rouge">--http.hide-product-header</code>. The
meaning of the option is unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.keep-alive-timeout</code> was renamed to <code class="language-plaintext highlighter-rouge">--http.keep-alive-timeout</code>. The
meaning of the option is unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.foxx-queues</code> was renamed to <code class="language-plaintext highlighter-rouge">--foxx.queues</code>. The meaning of the option
is unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--server.foxx-queues-poll-interval</code> was renamed to <code class="language-plaintext highlighter-rouge">--foxx.queues-poll-interval</code>.
The meaning of the option is unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--no-server</code> was renamed to <code class="language-plaintext highlighter-rouge">--server.rest-server</code>. Note that the meaning of the
option <code class="language-plaintext highlighter-rouge">--server.rest-server</code> is the opposite of the previous <code class="language-plaintext highlighter-rouge">--no-server</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">--database.query-cache-mode</code> was renamed to <code class="language-plaintext highlighter-rouge">--query.cache-mode</code>. The meaning of
the option is unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--database.query-cache-max-results</code> was renamed to <code class="language-plaintext highlighter-rouge">--query.cache-entries</code>. The
meaning of the option is unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--database.disable-query-tracking</code> was renamed to <code class="language-plaintext highlighter-rouge">--query.tracking</code>. The meaning 
of the option <code class="language-plaintext highlighter-rouge">--query.tracking</code> is the opposite of the previous
<code class="language-plaintext highlighter-rouge">--database.disable-query-tracking</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">--log.tty</code> was renamed to <code class="language-plaintext highlighter-rouge">--log.foreground-tty</code>. The meaning of the option is
unchanged.</li>
  <li><code class="language-plaintext highlighter-rouge">--upgrade</code> has been renamed to <code class="language-plaintext highlighter-rouge">--database.auto-upgrade</code>. In contrast to 2.8 this
option now requires a boolean parameter. To actually perform an automatic database 
upgrade at startup use <code class="language-plaintext highlighter-rouge">--database.auto-upgrade true</code>. To not perform it, use
<code class="language-plaintext highlighter-rouge">--database.auto-upgrade false</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">--check-version</code> has been renamed to <code class="language-plaintext highlighter-rouge">--database.check-version</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">--temp-path</code> has been renamed to <code class="language-plaintext highlighter-rouge">--temp.path</code>.</li>
</ul>

<h3 id="log-verbosity-topics-and-output-files">Log verbosity, topics and output files</h3>

<p>Logging now supports log topics. You can control these by specifying a log
topic in front of a log level or an output. For example</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  --log.level startup=trace --log.level info
</code></pre></div></div>

<p>will log messages concerning startup at trace level, everything else at info
level. <code class="language-plaintext highlighter-rouge">--log.level</code> can be specified multiple times at startup, for as many
topics as needed.</p>

<p>Some relevant log topics available in 3.0 are:</p>

<ul>
  <li><em>collector</em>: information about the WAL collectors state</li>
  <li><em>compactor</em>: information about the collection datafile compactor</li>
  <li><em>datafiles</em>: datafile-related operations</li>
  <li><em>mmap</em>: information about memory-mapping operations</li>
  <li><em>performance</em>: some performance-related information</li>
  <li><em>queries</em>: executed AQL queries</li>
  <li><em>replication</em>: replication-related info</li>
  <li><em>requests</em>: HTTP requests</li>
  <li><em>startup</em>: information about server startup and shutdown</li>
  <li><em>threads</em>: information about threads</li>
</ul>

<p>The new log option <code class="language-plaintext highlighter-rouge">--log.output &lt;definition&gt;</code> allows directing the global
or per-topic log output to different outputs. The output definition <definition>" 
can be one of</definition></p>

<ul>
  <li>- for stdin</li>
  <li>+ for stderr</li>
  <li>syslog://<syslog-facility>"</syslog-facility></li>
  <li>syslog://<syslog-facility>/<application-name>"</application-name></syslog-facility></li>
  <li>file://<relative-path>"</relative-path></li>
</ul>

<p>The option can be specified multiple times in order to configure the output
for different log topics. To set up a per-topic output configuration, use
<code class="language-plaintext highlighter-rouge">--log.output &lt;topic&gt;=&lt;definition&gt;</code>, e.g.</p>

<p>queries=file://queries.txt</p>

<p>logs all queries to the file queries.txt.</p>

<p>The old option <code class="language-plaintext highlighter-rouge">--log.file</code> is still available in 3.0 for convenience reasons. In
3.0 it is a shortcut for the more general option <code class="language-plaintext highlighter-rouge">--log.output file://filename</code>.</p>

<p>The old option <code class="language-plaintext highlighter-rouge">--log.requests-file</code> is still available in 3.0. It is now a shortcut
for the more general option <code class="language-plaintext highlighter-rouge">--log.output requests=file://...</code>.</p>

<p>The old option <code class="language-plaintext highlighter-rouge">--log.performance</code> is still available in 3.0. It is now a shortcut
for the more general option <code class="language-plaintext highlighter-rouge">--log.level performance=trace</code>.</p>

<h3 id="removed-options-for-logging">Removed options for logging</h3>

<p>The options <code class="language-plaintext highlighter-rouge">--log.content-filter</code> and <code class="language-plaintext highlighter-rouge">--log.source-filter</code> have been removed. They
have most been used during ArangoDBs internal development.</p>

<p>The syslog-related options <code class="language-plaintext highlighter-rouge">--log.application</code> and <code class="language-plaintext highlighter-rouge">--log.facility</code> have been removed.
They are superseded by the more general <code class="language-plaintext highlighter-rouge">--log.output</code> option which can also handle 
syslog targets.</p>

<h3 id="removed-other-options">Removed other options</h3>

<p>The option <code class="language-plaintext highlighter-rouge">--server.default-api-compatibility</code> was present in earlier version of
ArangoDB to control various aspects of the server behavior, e.g. HTTP return codes
or the format of HTTP location headers. Client applications could send an HTTP
header x-arango-version with a version number to request the server behavior of
a certain ArangoDB version.</p>

<p>This option was only honored in a handful of cases (described above) and was removed
in 3.0 because the changes in server behavior controlled by this option were changed
even before ArangoDB 2.0. This should have left enough time for client applications
to adapt to the new behavior, making the option superfluous in 3.0.</p>

<h3 id="thread-options">Thread options</h3>

<p>The options <code class="language-plaintext highlighter-rouge">--server.threads</code> and <code class="language-plaintext highlighter-rouge">--scheduler.threads</code> now have a default value of 
<code class="language-plaintext highlighter-rouge">0</code>. When <code class="language-plaintext highlighter-rouge">--server.threads</code> is set to <code class="language-plaintext highlighter-rouge">0</code> on startup, the suitable number of
threads will be determined by ArangoDB by asking the OS for the number of available
CPUs and using that as a baseline. If the number of CPUs is lower than 4, ArangoDB
will still start 4 dispatcher threads. When <code class="language-plaintext highlighter-rouge">--scheduler.threads</code> is set to <code class="language-plaintext highlighter-rouge">0</code>,
then ArangoDB will automatically determine the number of scheduler threads to start.
This will normally create 2 scheduler threads.</p>

<p>If the exact number of threads needs to be set by the admin, then it is still possible
to set <code class="language-plaintext highlighter-rouge">--server.threads</code> and <code class="language-plaintext highlighter-rouge">--scheduler.threads</code> to non-zero values. ArangoDB will
use these values and start that many threads (note that some threads may be created
lazily so they may not be present directly after startup).</p>

<p>The number of V8 JavaScript contexts to be created (<code class="language-plaintext highlighter-rouge">--javascript.v8-contexts</code>) now 
has a default value of <code class="language-plaintext highlighter-rouge">0</code> too, meaning that ArangoDB will create as many V8 contexts
as there will be dispatcher threads (controlled by the <code class="language-plaintext highlighter-rouge">--server.threads</code> option).
Setting this option to a non-zero value will create exactly as many V8 contexts as
specified.</p>

<p>Setting these options explicitly to non-zero values may be beneficial in environments
that have few resources (processing time, maximum thread count, available memory).</p>

<h2 id="authentication">Authentication</h2>

<p>The default value for <code class="language-plaintext highlighter-rouge">--server.authentication</code> is now <code class="language-plaintext highlighter-rouge">true</code> in the configuration
files shipped with ArangoDB. This means the server will be started with authentication 
enabled by default, requiring all client connections to provide authentication data 
when connecting to ArangoDB APIs. Previous ArangoDB versions used the setting
<code class="language-plaintext highlighter-rouge">--server.disable-authentication true</code>, effectively disabling authentication by default.</p>

<p>The default value for <code class="language-plaintext highlighter-rouge">--server.authentication-system-only</code> is now <code class="language-plaintext highlighter-rouge">true</code> in ArangoDB.
That means that Foxx applications running in ArangoDB will be public accessible (at
least they will not use ArangoDBs builtin authentication mechanism). Only requests to
ArangoDB APIs at URL path prefixes <code class="language-plaintext highlighter-rouge">/_api/</code> and <code class="language-plaintext highlighter-rouge">/_admin</code> will require authentication.
To change that, and use the builtin authentication mechanism for Foxx applications too,
set <code class="language-plaintext highlighter-rouge">--server.authentication-system-only</code> to <code class="language-plaintext highlighter-rouge">false</code>, and make sure to have the option
<code class="language-plaintext highlighter-rouge">--server.authentication</code> set to <code class="language-plaintext highlighter-rouge">true</code> as well.</p>

<p>Though enabling the authentication is recommended for production setups, it may be
overkill in a development environment. To turn off authentication, the option 
<code class="language-plaintext highlighter-rouge">--server.authentication</code> can be set to <code class="language-plaintext highlighter-rouge">false</code> in ArangoDBs configuration file or
on the command-line.</p>

<h2 id="web-admin-interface">Web Admin Interface</h2>

<p>The JavaScript shell has been removed from ArangoDBs web interface. The functionality
the shell provided is still fully available in the ArangoShell (arangosh) binary shipped
with ArangoDB.</p>

<h2 id="arangoshell-and-client-tools">ArangoShell and client tools</h2>

<p>The ArangoShell (arangosh) and the other client tools bundled with ArangoDB can only
connect to an ArangoDB server of version 3.0 or higher. They will not connect to an
ArangoDB 2.8. This is because the server HTTP APIs have changed between 2.8 and 3.0,
and all client tools uses these APIs.</p>

<p>In order to connect to earlier versions of ArangoDB with the client tools, an older
version of the client tools needs to be kept installed.</p>

<p>The preferred name for the template string generator function <code class="language-plaintext highlighter-rouge">aqlQuery</code> is now
<code class="language-plaintext highlighter-rouge">aql</code> and is automatically available in arangosh. Elsewhere, it can be loaded
like <code class="language-plaintext highlighter-rouge">const aql = require('@arangodb').aql</code>.</p>

<h3 id="command-line-options-added">Command-line options added</h3>

<p>All client tools in 3.0 provide an option <code class="language-plaintext highlighter-rouge">--server.max-packet-size</code> for controlling
the maximum size of HTTP packets to be handled by the client tools. The default value
is 128 MB, as in previous versions of ArangoDB. In contrast to previous versions in
which the value was hard-coded, the option is now configurable. It can be increased to
make the client tools handle very large HTTP result messages sent by the server.</p>

<h3 id="command-line-options-changed">Command-line options changed</h3>

<p>For all client tools, the option <code class="language-plaintext highlighter-rouge">--server.disable-authentication</code> was renamed to
<code class="language-plaintext highlighter-rouge">--server.authentication</code>. Note that the meaning of the option <code class="language-plaintext highlighter-rouge">--server.authentication</code> 
is the opposite of the previous <code class="language-plaintext highlighter-rouge">--server.disable-authentication</code>.</p>

<p>The option <code class="language-plaintext highlighter-rouge">--server.ssl-protocol</code> was renamed to <code class="language-plaintext highlighter-rouge">--ssl.protocol</code>. The meaning of 
the option is unchanged.</p>

<p>The command-line option <code class="language-plaintext highlighter-rouge">--quiet</code> was removed from all client tools except arangosh 
because it had no effect in them.</p>

<h3 id="arangobench">Arangobench</h3>

<p>In order to make its purpose more apparent the former <code class="language-plaintext highlighter-rouge">arangob</code> client tool has 
been renamed to <code class="language-plaintext highlighter-rouge">arangobench</code> in 3.0.</p>

<h2 id="miscellaneous-changes">Miscellaneous changes</h2>

<p>The checksum calculation algorithm for the <code class="language-plaintext highlighter-rouge">collection.checksum()</code> method and its
corresponding REST API GET <code class="language-plaintext highlighter-rouge">/_api/collection/&lt;collection&lt;/checksum</code> has changed in 3.0. 
Checksums calculated in 3.0 will differ from checksums calculated with 2.8 or before.</p>

<p>The ArangoDB server in 3.0 does not read a file <code class="language-plaintext highlighter-rouge">ENDPOINTS</code> containing a list of 
additional endpoints on startup. In 2.8 this file was automatically read if present
in the database directory.</p>

<p>The names of the sub-threads started by ArangoDB have changed in 3.0. This is relevant
on Linux only, where threads can be named and thread names may be visible to system
tools such as <em>top</em> or monitoring solutions.</p>

            </section>
            
<section class="page-nav">
  <a href="release-notes-new-features30.html">&#x276e;&nbsp;&nbsp;What's New in 3.0</a>
  <a class="next" href="release-notes-28.html">Version 2.8&nbsp;&nbsp;&#x276f;</a>
  <div style="clear: both"></div>
</section>
            <div id="page-footer" class="localized-footer">
              <hr>
              <p> ArangoDB - the native multi-model NoSQL database</p>
            </div>
          </div>
        </div>
        <script type="text/javascript">
          var disablePageToc = null;
          if (!disablePageToc) {
            generateToc();
          }
        </script>
      </div>
    </div>
  </div>
  <!-- Including InstantSearch.js library and styling -->
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

<script>
// Instanciating InstantSearch.js with Algolia credentials
const search = instantsearch({
  appId: 'IOUJQ85602',
  indexName: 'dev_DOCS',
  apiKey: '1fc63d8ff5b71963f0354561b770b591',
  searchFunction: function(helper) {
    var container = document.querySelector('#search-hits');

    if (helper.state.query === '') {
        container.style.display = 'none';
    } else {
        container.style.display = '';
    }

    helper.search();
  }
});

// Adding searchbar and results widgets
search.addWidget(
  instantsearch.widgets.searchBox({
    container: '#search-searchbar',
    placeholder: 'Search Documentation...',
    poweredBy: false // This is required if you're on the free Community plan
  })
);
search.addWidget(
    instantsearch.widgets.hits({
        container: '#search-hits',
        templates: {
            item: function(hit) {
                return '<div class="post-item">' +
                    '<a class="post-link" href="https://www.arangodb.com/docs'&#32;+&#32;hit.url&#32;+&#32;'"><div>' + (hit.headings[0] || "ArangoDB Documentation") + '</div>' +
                    '<div class="post-snippet">' + hit.excerpt_text + '</div></a>' +
                    '</div>';
            },
        },
    })
);

// Starting the search
search.start();
</script>
  <script type="text/javascript" id="hs-script-loader" async defer src="https://js.hs-scripts.com/2482448.js"></script>
</body>
</html>
